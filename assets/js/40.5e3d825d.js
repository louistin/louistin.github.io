(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{371:function(a,s,t){"use strict";t.r(s);var n=t(8),e=Object(n.a)({},(function(){var a=this,s=a.$createElement,t=a._self._c||s;return t("ContentSlotsDistributor",{attrs:{"slot-key":a.$parent.slotKey}},[t("h1",{attrs:{id:"easylogger-linux-平台静态库编译"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#easylogger-linux-平台静态库编译"}},[a._v("#")]),a._v(" Easylogger Linux 平台静态库编译")]),a._v(" "),t("h2",{attrs:{id:"_0-前言"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_0-前言"}},[a._v("#")]),a._v(" 0. 前言")]),a._v(" "),t("ul",[t("li",[a._v("封装 Easylogger Linux 平台静态库, 方便后面使用.")])]),a._v(" "),t("h2",{attrs:{id:"_1-准备工作"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_1-准备工作"}},[a._v("#")]),a._v(" 1. 准备工作")]),a._v(" "),t("ul",[t("li",[a._v("下载源码")])]),a._v(" "),t("h2",{attrs:{id:"_2-封装方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_2-封装方法"}},[a._v("#")]),a._v(" 2. 封装方法")]),a._v(" "),t("ul",[t("li",[a._v("将 demo 中 linux 部分的代码移动到主目录 easylogger 中")]),a._v(" "),t("li",[a._v("创建编译 Makefile"),t("div",{staticClass:"language-makefile line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-makefile"}},[t("code",[a._v("CC "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" cc\nAR "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" ar\n\nROOTPATH"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("./\nINCLUDE "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" -I./easylogger/inc  -I./easylogger/plugins/\nLIB"),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v("-lpthread\n\nOBJ "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("patsubst")]),a._v(" %.c, %.o, "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("wildcard")]),a._v(" *.c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nOBJ "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("patsubst")]),a._v(" %.c, %.o, "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("wildcard")]),a._v(" easylogger/src/*.c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nOBJ "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("patsubst")]),a._v(" %.c, %.o, "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("wildcard")]),a._v(" easylogger/plugins/file/elog_file.c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nOBJ "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("patsubst")]),a._v(" %.c, %.o, "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("wildcard")]),a._v(" easylogger/port/*.c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\nOBJ "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("+=")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("patsubst")]),a._v(" %.c, %.o, "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),t("span",{pre:!0,attrs:{class:"token keyword"}},[a._v("wildcard")]),a._v(" easylogger/plugins/file/*.c"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n\nCFLAGS "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" -O0 -g3 -Wall\ntarget "),t("span",{pre:!0,attrs:{class:"token operator"}},[a._v("=")]),a._v(" libeasylogger.a\n\n"),t("span",{pre:!0,attrs:{class:"token symbol"}},[a._v("all")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("OBJ"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("AR"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" -crv "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("target"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" out/*.o\n    mv "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("target"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" out\n"),t("span",{pre:!0,attrs:{class:"token symbol"}},[a._v("%.o")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("%.c\n    "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("CC"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("CFLAGS"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" -c "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$<")]),a._v(" -o "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$@")]),a._v(" "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v("(")]),a._v("INCLUDE"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(")")]),a._v("\n    mv "),t("span",{pre:!0,attrs:{class:"token variable"}},[a._v("$@")]),a._v(" out\n"),t("span",{pre:!0,attrs:{class:"token symbol"}},[a._v("clean")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    rm -rf out/*\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br"),t("span",{staticClass:"line-number"},[a._v("2")]),t("br"),t("span",{staticClass:"line-number"},[a._v("3")]),t("br"),t("span",{staticClass:"line-number"},[a._v("4")]),t("br"),t("span",{staticClass:"line-number"},[a._v("5")]),t("br"),t("span",{staticClass:"line-number"},[a._v("6")]),t("br"),t("span",{staticClass:"line-number"},[a._v("7")]),t("br"),t("span",{staticClass:"line-number"},[a._v("8")]),t("br"),t("span",{staticClass:"line-number"},[a._v("9")]),t("br"),t("span",{staticClass:"line-number"},[a._v("10")]),t("br"),t("span",{staticClass:"line-number"},[a._v("11")]),t("br"),t("span",{staticClass:"line-number"},[a._v("12")]),t("br"),t("span",{staticClass:"line-number"},[a._v("13")]),t("br"),t("span",{staticClass:"line-number"},[a._v("14")]),t("br"),t("span",{staticClass:"line-number"},[a._v("15")]),t("br"),t("span",{staticClass:"line-number"},[a._v("16")]),t("br"),t("span",{staticClass:"line-number"},[a._v("17")]),t("br"),t("span",{staticClass:"line-number"},[a._v("18")]),t("br"),t("span",{staticClass:"line-number"},[a._v("19")]),t("br"),t("span",{staticClass:"line-number"},[a._v("20")]),t("br"),t("span",{staticClass:"line-number"},[a._v("21")]),t("br"),t("span",{staticClass:"line-number"},[a._v("22")]),t("br"),t("span",{staticClass:"line-number"},[a._v("23")]),t("br"),t("span",{staticClass:"line-number"},[a._v("24")]),t("br")])])]),a._v(" "),t("li",[a._v("修改 elog.c 源码, 主要改动点为两个:\n"),t("ul",[t("li",[a._v("调整输出模式")]),a._v(" "),t("li",[a._v("重新添加一个 init 函数, 以后使用直接初始化")])])])]),a._v(" "),t("h2",{attrs:{id:"_3-使用方法"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_3-使用方法"}},[a._v("#")]),a._v(" 3. 使用方法")]),a._v(" "),t("ul",[t("li",[a._v("头文件 "),t("code",[a._v("easylogger/inc")])]),a._v(" "),t("li",[a._v("编译选项 "),t("code",[a._v("-lpthread")])]),a._v(" "),t("li",[a._v("编译参考"),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[a._v("gcc main.c -o main -L./out/ -leasylogger -I./easylogger/inc/ -lpthread\n")])]),a._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[a._v("1")]),t("br")])])])]),a._v(" "),t("h2",{attrs:{id:"faq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#faq"}},[a._v("#")]),a._v(" FAQ")])])}),[],!1,null,null,null);s.default=e.exports}}]);