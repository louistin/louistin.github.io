(window.webpackJsonp=window.webpackJsonp||[]).push([[34],{365:function(s,a,t){"use strict";t.r(a);var n=t(8),e=Object(n.a)({},(function(){var s=this,a=s.$createElement,t=s._self._c||a;return t("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[t("h1",{attrs:{id:"tcp-ip-详解"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#tcp-ip-详解"}},[s._v("#")]),s._v(" TCP/IP 详解")]),s._v(" "),t("blockquote",[t("p",{staticStyle:{"font-family":"Arial","font-size":"80%",color:"#C0C0C0"},attrs:{align:"left"}},[s._v("全文字数 "+s._s(s.$page.readingTime.words)+" words  |  阅读时间 "+s._s(Math.ceil(s.$page.readingTime.minutes))+" mins")])]),s._v(" "),t("p"),t("div",{staticClass:"table-of-contents"},[t("ul",[t("li",[t("a",{attrs:{href:"#_01-概述"}},[s._v("01 - 概述")]),t("ul",[t("li",[t("a",{attrs:{href:"#分层"}},[s._v("分层")])]),t("li",[t("a",{attrs:{href:"#互联网地址"}},[s._v("互联网地址")])]),t("li",[t("a",{attrs:{href:"#封装"}},[s._v("封装")])]),t("li",[t("a",{attrs:{href:"#分用"}},[s._v("分用")])]),t("li",[t("a",{attrs:{href:"#客户-服务器模型"}},[s._v("客户-服务器模型")])]),t("li",[t("a",{attrs:{href:"#端口号"}},[s._v("端口号")])])])]),t("li",[t("a",{attrs:{href:"#_02-链路层"}},[s._v("02 - 链路层")]),t("ul",[t("li",[t("a",{attrs:{href:"#环回接口"}},[s._v("环回接口")])]),t("li",[t("a",{attrs:{href:"#最大传输单元-mtu"}},[s._v("最大传输单元 MTU")])])])]),t("li",[t("a",{attrs:{href:"#_03-ip-网际协议"}},[s._v("03 - IP 网际协议")]),t("ul",[t("li",[t("a",{attrs:{href:"#ip-首部"}},[s._v("IP 首部")])]),t("li",[t("a",{attrs:{href:"#ip-路由选择"}},[s._v("IP 路由选择")])]),t("li",[t("a",{attrs:{href:"#子网"}},[s._v("子网")])]),t("li",[t("a",{attrs:{href:"#特殊情况-ip"}},[s._v("特殊情况 IP")])]),t("li",[t("a",{attrs:{href:"#命令"}},[s._v("命令")])]),t("li",[t("a",{attrs:{href:"#faq"}},[s._v("FAQ")])])])]),t("li",[t("a",{attrs:{href:"#_04-arp-地址解析协议"}},[s._v("04 - ARP 地址解析协议")]),t("ul",[t("li",[t("a",{attrs:{href:"#arp-协议"}},[s._v("ARP 协议")])]),t("li",[t("a",{attrs:{href:"#arp-高速缓存"}},[s._v("ARP 高速缓存")])]),t("li",[t("a",{attrs:{href:"#arp-分组格式"}},[s._v("ARP 分组格式")])])])]),t("li",[t("a",{attrs:{href:"#_05-rarp-逆地址解析协议"}},[s._v("05 - RARP 逆地址解析协议")]),t("ul",[t("li",[t("a",{attrs:{href:"#rarp-协议"}},[s._v("RARP 协议")])]),t("li",[t("a",{attrs:{href:"#rarp-发送与接收"}},[s._v("RARP 发送与接收")])])])]),t("li",[t("a",{attrs:{href:"#_06-icmp-internet-控制报文协议"}},[s._v("06 - ICMP Internet 控制报文协议")]),t("ul",[t("li",[t("a",{attrs:{href:"#icmp-控制报文协议"}},[s._v("ICMP 控制报文协议")])]),t("li",[t("a",{attrs:{href:"#ping"}},[s._v("Ping")])]),t("li",[t("a",{attrs:{href:"#icmp-相关应用"}},[s._v("ICMP 相关应用")])])])]),t("li",[t("a",{attrs:{href:"#_07-ping-程序"}},[s._v("07 - Ping 程序")]),t("ul",[t("li",[t("a",{attrs:{href:"#ping"}},[s._v("Ping")])]),t("li",[t("a",{attrs:{href:"#lan-ping-示例"}},[s._v("LAN Ping 示例")])]),t("li",[t("a",{attrs:{href:"#wan-ping"}},[s._v("WAN Ping")])])])]),t("li",[t("a",{attrs:{href:"#_08-traceroute-程序"}},[s._v("08 - Traceroute 程序")]),t("ul",[t("li",[t("a",{attrs:{href:"#traceroute"}},[s._v("Traceroute")])])])]),t("li",[t("a",{attrs:{href:"#_09-ip-选路"}},[s._v("09 - IP 选路")])]),t("li",[t("a",{attrs:{href:"#_10-动态选路协议"}},[s._v("10 - 动态选路协议")])]),t("li",[t("a",{attrs:{href:"#_11-udp-用户数据报协议"}},[s._v("11 - UDP 用户数据报协议")])]),t("li",[t("a",{attrs:{href:"#_12-广播和多播"}},[s._v("12 - 广播和多播")])])])]),t("p"),s._v(" "),t("hr"),s._v(" "),t("h2",{attrs:{id:"_01-概述"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_01-概述"}},[s._v("#")]),s._v(" 01 - 概述")]),s._v(" "),t("h3",{attrs:{id:"分层"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分层"}},[s._v("#")]),s._v(" 分层")]),s._v(" "),t("p",[t("strong",[s._v("TCP/IP 协议族分层")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/01/tcpip_002.webp"),alt:"TCP/IP 协议族分层"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("链路层\n    设备驱动程序及接口卡\n网络层\n    IP ICMP IGMP\n传输层\n    TCP UNP\n应用层\n    Telnet FTP SMTP SNMP\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"互联网地址"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#互联网地址"}},[s._v("#")]),s._v(" 互联网地址")]),s._v(" "),t("p",[t("strong",[s._v("五类IP地址")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/01/ip_address_001.webp"),alt:"五类 IP 地址"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("A: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.0")]),s._v(".0.0   - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.255")]),s._v(".255.255\nB: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("128.0")]),s._v(".0.0 - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("191.255")]),s._v(".255.255\nC: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.0")]),s._v(".0.0 - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("223.255")]),s._v(".255.255\nD: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.0 - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("239.255")]),s._v(".255.255\nE: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("240.0")]),s._v(".0.0 - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("247.255")]),s._v(".255.255\n\n单播 组播 广播\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"封装"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#封装"}},[s._v("#")]),s._v(" 封装")]),s._v(" "),t("p",[t("strong",[s._v("数据封装")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/01/data_package_001.webp"),alt:"数据封装"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("TCP -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" IP 的数据单元称为 TCP 段"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TCP segment"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nIP -"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" 网络接口层 的数据单元称为 IP 数据报"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("IP datagram"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n以太网传输的比特流称为 帧"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Frame"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"分用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#分用"}},[s._v("#")]),s._v(" 分用")]),s._v(" "),t("p",[t("strong",[s._v("数据分用")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/01/data_demultiplexing_001.webp"),alt:"数据分用"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("Demultiplexing\n\n目的主机收到以太网数据帧时, 数据开始从协议栈中由底向上升, 同时去掉各层协议加上报文首部.\n  每层协议盒都要检查报文首部中的协议标识, 以确定接受数据的上层协议. 这个过程称作分用.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"客户-服务器模型"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#客户-服务器模型"}},[s._v("#")]),s._v(" 客户-服务器模型")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("重复型\n并发型\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])]),t("h3",{attrs:{id:"端口号"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#端口号"}},[s._v("#")]),s._v(" 端口号")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("/etc/service 查看\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_02-链路层"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_02-链路层"}},[s._v("#")]),s._v(" 02 - 链路层")]),s._v(" "),t("ul",[t("li",[s._v("链路层\n"),t("ul",[t("li",[s._v("为 IP 模块发送和接收 IP 数据报")]),s._v(" "),t("li",[s._v("为 ARP 模块发送 ARP 请求和接收 ARP 应答")]),s._v(" "),t("li",[s._v("为 RARP 发送 RARP 请求和接收 RARP 应答")])])])]),s._v(" "),t("h3",{attrs:{id:"环回接口"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#环回接口"}},[s._v("#")]),s._v(" 环回接口")]),s._v(" "),t("p",[t("strong",[s._v("环回接口处理IP数据报流程")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/02/lookback_interface_001.webp"),alt:"环回接口处理IP数据报流程"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("Loopback Interface\n允许运行在同一台主机上的客户程序和服务器程序通过 TCP/IP 进行通信.\n    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("命名为 localhost"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(". 传给环回地址的任何数据均作为 IP 输入\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(". 传给广播和多播地址的数据报会复制一份传给环回接口, 然后送到以太网上\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(". 任何传给该主机 IP 地址的数据均送到环回接口\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h3",{attrs:{id:"最大传输单元-mtu"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#最大传输单元-mtu"}},[s._v("#")]),s._v(" 最大传输单元 MTU")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("MTU: 链路层以太网协议等对应的数据帧长度最大值"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("不包括以太网首部/尾部"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    以太网 MTU "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v("\n    Internet MTU "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("576")]),s._v("\n    IP 层数据报长度超出链路层 MTU 时, IP 层需要进行分片"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("fragmentation"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n\n路径 MTU: 两台通信主机路径中最小 MTU\n    路径 MTU 受两端各自方向选路不同, 两台主机间 MTU 值可能不一样\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ifconfig -a")]),s._v("\ndocker0: "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flags")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("409")]),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v("<")]),s._v("UP,BROADCAST,MULTICAST"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  mtu "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v("\n        inet "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.18")]),s._v(".0.1  netmask "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".0.0  broadcast "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.18")]),s._v(".255.255\n        inet6 fe80::42:1eff:fe10:960f  prefixlen "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("  scopeid 0x2"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v("<")]),s._v("link"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        ether 02:42:1e:10:96:0f  txqueuelen "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Ethernet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        RX packets "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("624")]),s._v("  bytes "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("106169")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("103.6")]),s._v(" KiB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        RX errors "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  dropped "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  overruns "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  frame "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n        TX packets "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("502")]),s._v("  bytes "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1028258")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1004.1")]),s._v(" KiB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        TX errors "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  dropped "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" overruns "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  carrier "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  collisions "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# eth0 以太网接口, 支持以太网协议")]),s._v("\neth0: "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flags")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("416")]),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("3")]),s._v("<")]),s._v("UP,BROADCAST,RUNNING,MULTICAST"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  mtu "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v("\n        inet "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2  netmask "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".240.0  broadcast "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".15.255\n        inet6 fe80::5054:ff:fe1d:9861  prefixlen "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("  scopeid 0x2"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v("<")]),s._v("link"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        ether "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v(":54:00:1d:98:61  txqueuelen "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Ethernet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        RX packets "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9750326")]),s._v("  bytes "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2354351488")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.1")]),s._v(" GiB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        RX errors "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  dropped "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  overruns "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  frame "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n        TX packets "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9518774")]),s._v("  bytes "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1918820423")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.7")]),s._v(" GiB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        TX errors "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  dropped "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" overruns "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  carrier "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  collisions "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# loopback 接口, 支持 loopback 协议")]),s._v("\nlo: "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flags")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("3")]),s._v("<")]),s._v("UP,LOOPBACK,RUNNING"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  mtu "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v("\n        inet "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1  netmask "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.0")]),s._v(".0.0\n        inet6 ::1  prefixlen "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v("  scopeid 0x1"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v("<")]),s._v("host"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        loop  txqueuelen "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Local Loopback"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        RX packets "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7527")]),s._v("  bytes "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("369759")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("361.0")]),s._v(" KiB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        RX errors "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  dropped "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  overruns "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  frame "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n        TX packets "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7527")]),s._v("  bytes "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("369759")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("361.0")]),s._v(" KiB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        TX errors "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  dropped "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" overruns "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  carrier "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  collisions "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 查看各个链路层协议 MTU 值")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# netstat -in")]),s._v("\nKernel Interface table\nIface             MTU    RX-OK RX-ERR RX-DRP RX-OVR    TX-OK TX-ERR TX-DRP TX-OVR Flg\ndocker0          "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("624")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("502")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" BMU\neth0             "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9750648")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9519116")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" BMRU\nlo              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7527")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7527")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" LRU\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br")])]),t("h2",{attrs:{id:"_03-ip-网际协议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_03-ip-网际协议"}},[s._v("#")]),s._v(" 03 - IP 网际协议")]),s._v(" "),t("blockquote",[t("p",[s._v("不可靠 unreliable")]),s._v(" "),t("blockquote",[t("p",[s._v("不保证 IP 数据报能成功到达目的地, 任务的可靠性需要由上层来提供")])])]),s._v(" "),t("blockquote",[t("p",[s._v("无连接 connectionless")]),s._v(" "),t("blockquote",[t("p",[s._v("IP 并不维护任何关于后续数据报的状态信息, 每个数据报处理相互独立. 发送到达顺序, 路径均可不同")])])]),s._v(" "),t("h3",{attrs:{id:"ip-首部"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ip-首部"}},[s._v("#")]),s._v(" IP 首部")]),s._v(" "),t("p",[t("strong",[s._v("IP 首部")]),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/03/ip_header_001.webp"),alt:"IP 首部"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("高位                                                        低位\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("                   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("                   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("                   "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("Version"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  IHL  "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("Type of Service"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("          Total Length         "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("         Identification        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("Flags"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("      Fragment Offset    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("  Time to Live "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    Protocol   "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("         Header Checksum       "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                       Source Address                          "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                    Destination Address                        "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("                    Options                    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("    Padding    "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),s._v("\n+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+\n\nVersion 版本\n    目前为 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(", 即 IPv4\nIHL 首部长度\nTOS 服务类型\n    3bit 优先权子段 + 4bit TOS 子段 + 1bit "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n    TOS 子段\n        最小时延\n        最大吞吐量\n        最高可靠性\n        最小费用\nTotal Length 整个 IP 数据报长度\n    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v(" bit, 最大长度 "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("^16 - "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("65535")]),s._v(" byte\nIdentification 标识字段\n    唯一的标识主机发送的每一份数据报, 通常每次 +1\nTTL 生存时间\n    数据报可以经过的最多路由器数, 每次 -1, 防止由于路由环路导致的不停转发\n    TTL 为 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" 时, 数据报被丢弃, 并发送 ICMP 报文通知源主机\nProtocol\n    标识上层所使用的协议"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("TCP UDP 等"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nHeader Checksum\n    IP Header 部分的校验和, 不包括数据部分\nSource Address / Destination Address\n    除非使用 NAT, 否则整个传输中, 二者不变\nOptions\n    以 32bit 为界限, 必要时插入 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" 填充, 保证 IP 首部始终是 32bit 的整数倍\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br")])]),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("big endian 字节序\n    传输顺序为 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("-7, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("-15, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("-23, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("24")]),s._v("-31 bit\n    TCP/IP 首部中所有二进制整数在网络中传输都为此次序\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"ip-路由选择"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ip-路由选择"}},[s._v("#")]),s._v(" IP 路由选择")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(". 如果目的主机与源主机直接相连, 或在一个共享网络上, IP 数据报直接送到目的主机上.\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(". 不直接相连时, 主机把数据报发往默认的路由器上, 又路由器转发该数据报\n\nIP 层既可以配置成路由器功能, 也可以配置成主机功能.\n    主机不会把数据报从一个接口转发到另一个接口, 路由器会转发.\nIP 在内存中有一个路由表, 当收到一份数据报并进行发送时, 都要对该表搜索一次.\n    接收到某个网络接口的数据报时, 检查目的 IP 地址是否为本机 IP 地址或 IP 广播地址, 是则由\n      对应协议模块处理. 不是则, IP 层设置为路由器功能就转发, 否则就丢弃数据报\n\n路由表信息\n    目的 IP 地址\n    下一站路由器 IP 地址 / 直连网络 IP 地址\n    标志\n        其中一个标志致命目的 IP 地址是网络地址还是主机地址\n        另一个标志致命下一站路由器是否为真正的下一站路由器, 还是直连接口\n    为数据报的传输指定一个网络接口\n\nIP 路由选择\n    通过逐跳来实现\n    数据报在各站的传输过程中目的 IP 地址始终不变, 但是封装和目的链路层地址每一站都可以改变.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br")])]),t("h3",{attrs:{id:"子网"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#子网"}},[s._v("#")]),s._v(" 子网")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("A B 类地址一般都要进行子网划分, 用于子网号的比特数通过子网掩码来指定.\n\nB 类地址子网编址\n    一种划分: 16bit 网络号 + 8bit 子网号 + 8bit 主机号\n子网编址可以缩小 Internet 路由表规模.\n\n子网掩码\n    值为 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(" 的比特留给网络号和子网号, 为 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" 的比特留给主机号\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])]),t("h3",{attrs:{id:"特殊情况-ip"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#特殊情况-ip"}},[s._v("#")]),s._v(" 特殊情况 IP")]),s._v(" "),t("p",[t("strong",[s._v("特殊 IP地址")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/03/special_ip_001.webp"),alt:"特殊 IP地址"}})]),s._v(" "),t("h3",{attrs:{id:"命令"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#命令"}},[s._v("#")]),s._v(" 命令")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ifconfig")]),s._v("\ndocker0: "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flags")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("409")]),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("9")]),s._v("<")]),s._v("UP,BROADCAST,MULTICAST"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  mtu "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v("\n        inet "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.18")]),s._v(".0.1  netmask "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".0.0  broadcast "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.18")]),s._v(".255.255\n        inet6 fe80::42:1eff:fe10:960f  prefixlen "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("  scopeid 0x2"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v("<")]),s._v("link"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        ether 02:42:1e:10:96:0f  txqueuelen "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Ethernet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        RX packets "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("624")]),s._v("  bytes "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("106169")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("103.6")]),s._v(" KiB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        RX errors "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  dropped "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  overruns "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  frame "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n        TX packets "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("502")]),s._v("  bytes "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1028258")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1004.1")]),s._v(" KiB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        TX errors "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  dropped "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" overruns "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  carrier "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  collisions "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\neth0: "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flags")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("416")]),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("3")]),s._v("<")]),s._v("UP,BROADCAST,RUNNING,MULTICAST"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  mtu "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v("\n        inet "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2  netmask "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".240.0  broadcast "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".15.255\n        inet6 fe80::5054:ff:fe1d:9861  prefixlen "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("  scopeid 0x2"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v("<")]),s._v("link"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        ether "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v(":54:00:1d:98:61  txqueuelen "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Ethernet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        RX packets "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9793138")]),s._v("  bytes "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2358843500")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.1")]),s._v(" GiB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        RX errors "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  dropped "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  overruns "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  frame "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n        TX packets "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9564495")]),s._v("  bytes "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1925846680")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.7")]),s._v(" GiB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        TX errors "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  dropped "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" overruns "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  carrier "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  collisions "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\nlo: "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flags")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("3")]),s._v("<")]),s._v("UP,LOOPBACK,RUNNING"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  mtu "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v("\n        inet "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("127.0")]),s._v(".0.1  netmask "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.0")]),s._v(".0.0\n        inet6 ::1  prefixlen "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v("  scopeid 0x1"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v("<")]),s._v("host"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        loop  txqueuelen "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Local Loopback"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        RX packets "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7566")]),s._v("  bytes "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("371672")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("362.9")]),s._v(" KiB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        RX errors "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  dropped "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  overruns "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  frame "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n        TX packets "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7566")]),s._v("  bytes "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("371672")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("362.9")]),s._v(" KiB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        TX errors "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  dropped "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" overruns "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  carrier "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  collisions "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ifconfig eth0")]),s._v("\neth0: "),t("span",{pre:!0,attrs:{class:"token assign-left variable"}},[s._v("flags")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("416")]),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("3")]),s._v("<")]),s._v("UP,BROADCAST,RUNNING,MULTICAST"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("  mtu "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v("\n        inet "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".0.2  netmask "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("255.255")]),s._v(".240.0  broadcast "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("172.17")]),s._v(".15.255\n        inet6 fe80::5054:ff:fe1d:9861  prefixlen "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("  scopeid 0x2"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("0")]),s._v("<")]),s._v("link"),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v("\n        ether "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("52")]),s._v(":54:00:1d:98:61  txqueuelen "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1000")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("Ethernet"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        RX packets "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9793152")]),s._v("  bytes "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2358844444")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.1")]),s._v(" GiB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        RX errors "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  dropped "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  overruns "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  frame "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n        TX packets "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9564505")]),s._v("  bytes "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1925848928")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.7")]),s._v(" GiB"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        TX errors "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  dropped "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" overruns "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  carrier "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("  collisions "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# netstat -in")]),s._v("\nKernel Interface table\nIface             MTU    RX-OK RX-ERR RX-DRP RX-OVR    TX-OK TX-ERR TX-DRP TX-OVR Flg\ndocker0          "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("624")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("           "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("502")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" BMU\neth0             "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1500")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9793168")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("       "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9564517")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" BMRU\nlo              "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("65536")]),s._v("     "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7566")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("          "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7566")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("      "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" LRU\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br"),t("span",{staticClass:"line-number"},[s._v("19")]),t("br"),t("span",{staticClass:"line-number"},[s._v("20")]),t("br"),t("span",{staticClass:"line-number"},[s._v("21")]),t("br"),t("span",{staticClass:"line-number"},[s._v("22")]),t("br"),t("span",{staticClass:"line-number"},[s._v("23")]),t("br"),t("span",{staticClass:"line-number"},[s._v("24")]),t("br"),t("span",{staticClass:"line-number"},[s._v("25")]),t("br"),t("span",{staticClass:"line-number"},[s._v("26")]),t("br"),t("span",{staticClass:"line-number"},[s._v("27")]),t("br"),t("span",{staticClass:"line-number"},[s._v("28")]),t("br"),t("span",{staticClass:"line-number"},[s._v("29")]),t("br"),t("span",{staticClass:"line-number"},[s._v("30")]),t("br"),t("span",{staticClass:"line-number"},[s._v("31")]),t("br"),t("span",{staticClass:"line-number"},[s._v("32")]),t("br"),t("span",{staticClass:"line-number"},[s._v("33")]),t("br"),t("span",{staticClass:"line-number"},[s._v("34")]),t("br"),t("span",{staticClass:"line-number"},[s._v("35")]),t("br"),t("span",{staticClass:"line-number"},[s._v("36")]),t("br"),t("span",{staticClass:"line-number"},[s._v("37")]),t("br"),t("span",{staticClass:"line-number"},[s._v("38")]),t("br"),t("span",{staticClass:"line-number"},[s._v("39")]),t("br"),t("span",{staticClass:"line-number"},[s._v("40")]),t("br"),t("span",{staticClass:"line-number"},[s._v("41")]),t("br"),t("span",{staticClass:"line-number"},[s._v("42")]),t("br"),t("span",{staticClass:"line-number"},[s._v("43")]),t("br"),t("span",{staticClass:"line-number"},[s._v("44")]),t("br")])]),t("h3",{attrs:{id:"faq"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#faq"}},[s._v("#")]),s._v(" FAQ")]),s._v(" "),t("ol",[t("li",[s._v("给定 IP 地址和子网掩码, 可以知道哪些信息?")])]),s._v(" "),t("blockquote",[t("p",[s._v("本机 IP 的类型, 子网号, 主机号")])]),s._v(" "),t("ol",{attrs:{start:"2"}},[t("li",[s._v("环回地址必须是 127.0.0.1 吗?")])]),s._v(" "),t("blockquote",[t("p",[s._v("不是必须. 127.0.0.0 - 127.255.255.255 均是环回地址")])]),s._v(" "),t("h2",{attrs:{id:"_04-arp-地址解析协议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_04-arp-地址解析协议"}},[s._v("#")]),s._v(" 04 - ARP 地址解析协议")]),s._v(" "),t("blockquote",[t("p",[s._v("地址解析为两种不同的地址形式提供映射: 32bit IP 地址和数据链路层使用的任何类型地址")]),s._v(" "),t("blockquote",[t("p",[s._v("ARP 地址解析协议: 32bit IP 地址 -> 48bit 以太网地址"),t("br"),s._v("\nRARP 逆地址解析协议: 48bit 以太网地址 -> 32bit IP 地址")])])]),s._v(" "),t("h3",{attrs:{id:"arp-协议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#arp-协议"}},[s._v("#")]),s._v(" ARP 协议")]),s._v(" "),t("ul",[t("li",[t("p",[s._v("ARP")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("当一台主机把以太网数据帧发送到位于同一局域网的另一台主机时, 设备驱动程序不检查 IP 数据报\n  中的 IP 地址, 而是根据 48bit 的以太网地址来确定目的主机的.\nARP 为 IP 地址到对应的硬件地址间提供动态映射.\nARP 用于运行 IPv4 的多接入链路层网络, 在点对点链路中不使用 ARP.\nARP 是一个通用协议, 可以支持多种地址之间的映射, 实际中总是用于 32bit IPv4 地址和\n  48bit MAC 地址之间的映射\n\n源主机发送数据前都会检查自己的 ARP 列表中是否有该 IP 对应的 MAC 地址, 有则直接发送, 没\n  有则需要查询\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("FTP 示例")]),s._v(" "),t("p",[t("strong",[s._v("FTP ARP 流程")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/04/arp_ftp_001.webp"),alt:"FTP ARP 流程"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# ftp louistian.xyz")]),s._v("\n\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(". 调用 gethostbyname"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" 将主机名转换为 32bit IP 地址. 转换过程使用 DNS 或者使用静\n    态注记文件 /etc/hosts\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(". FTP 客户端请求 TCP 使用获取到的 IP 地址建立连接\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(". TCP 发送一个连接请求分段到远程主机, 即使用上述 IP 地址发送一份 IP 数据报\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(". 如果目的主机在本地网络上, 那么 IP 数据报可以直接送到目的主机上. 如果目的主机在一个远程\n    网络上, 那么就通过 IP 选路函数来确定位于本地网络上的下一站路由器地址, 并让其转发 IP\n    数据报. 此时, IP 数据报都是被送到位于本地网络上的一台主机或路由器\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v(". 在以太网中, ARP 发送一份 ARP 请求以太网数据帧到以太网上的每个主机, 即广播. ARP 请求\n    数据帧中包含目的主机 IP 地址\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v(". 目的主机 ARP 层收到广播报文后, 识别与自己的 IP 地址一致, 发送一个 ARP 应答. 应答中\n    包含 IP 地址和对应的 MAC 地址\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v(". 收到 ARP 应答后, 可以根据 MAC 地址发送 IP 数据报\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v(". IP 数据报发送到目的主机\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("ARP 代理")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("当发送主机和接收主机不在同一个局域网中时, 即使知道目的主机 MAC 地址, 两者也不能相互通信,\n  必须经过路由器转发才可以. 此时发送主机通过 ARP 协议获取的不是目的主机的真实 MAC 地址,\n  而是一台可以通往局域网外的路由器的 MAC 地址, 此后发送主机发往目的主机的所有帧, 都将发\n  往该路由器, 由其进行向外发送.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"arp-高速缓存"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#arp-高速缓存"}},[s._v("#")]),s._v(" ARP 高速缓存")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("每个主机上都有 ARP 高速缓存, 缓存有效时间 20min\n\n"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("louis@louis ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("$ arp -a\n_gateway "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".6.2"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" at 00:50:56:eb:f3:c0 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ether"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" on ens160\n? "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".6.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" at 00:50:56:c0:00:08 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("ether"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v(" on ens160\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])]),t("h3",{attrs:{id:"arp-分组格式"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#arp-分组格式"}},[s._v("#")]),s._v(" ARP 分组格式")]),s._v(" "),t("p",[t("strong",[s._v("ARP 分组格式")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/04/arp_format_001.webp"),alt:"ARP 分组格式"}})]),s._v(" "),t("ul",[t("li",[t("p",[s._v("PING 示例")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(". CMD 管理员运行, arp -d 清除所有高速缓存\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(". "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".2.106\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(". arp -a 查看高速缓存\n    C:"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("Windows"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("system3"),t("span",{pre:!0,attrs:{class:"token operator"}},[t("span",{pre:!0,attrs:{class:"token file-descriptor important"}},[s._v("2")]),s._v(">")]),s._v("arp -a\n    Interface: "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".2.104 --- 0xd\n    Internet Address      Physical Address      Type\n    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".2.1           "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v("-fc-68-b4-2f-25     dynamic\n    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".2.106         "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("94")]),s._v("-0c-98-6a-2a-97     dynamic\n    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".2.255         ff-ff-ff-ff-ff-ff     static\n    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.2             01-00-5e-00-00-02     static\n    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.22            01-00-5e-00-00-16     static\n    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.251           01-00-5e-00-00-fb     static\n    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("224.0")]),s._v(".0.252           01-00-5e-00-00-fc     static\n    "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("239.255")]),s._v(".255.250       01-00-5e-7f-ff-fa     static\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br")])]),t("ul",[t("li",[s._v("ARP 广播请求\n"),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/04/arp_broadcast_001.webp"),alt:"ARP 广播请求"}})])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("以太网帧头部分\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("-15bit "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 以太网帧头目的地址, ff:ff:ff:ff:ff:ff 广播\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("-31bit "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 以太网帧头源地址, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("34")]),s._v(":13:e8:5e:41:51\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),s._v("-39bit "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 帧类型, 0806 表示 ARP 协议\n\nARP 数据部分\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("-15bit "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 硬件类型, 0001 以太网\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("-31bit "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 协议类型, 0800 IPv4 协议\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("32")]),s._v("-39bit "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" MAC 地址长度, 06 6byte\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("40")]),s._v("-47bit "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 协议地址长度, 05 4byte\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("48")]),s._v("-63bit "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 操作码, 0001 ARP 请求\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("-111bit "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 发送方 MAC 地址, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("34")]),s._v(":13:e8:5e:41:51\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("112")]),s._v("-143bit "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 发送方 IP 协议地址, c0 a8 02 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("68")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".2.106\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("144")]),s._v("-191bit "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 接收方 MAC 地址, 一般全 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192")]),s._v("-123bit "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 接收方 IP 协议地址"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("需对应协议类型"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", c0 a8 02 6a "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".2.106\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br")])]),t("ul",[t("li",[s._v("ARP 广播响应\n"),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/04/arp_broadcast_002.webp"),alt:"ARP 广播响应"}})])]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("以太网帧头部分\n\nARP 数据部分\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("48")]),s._v("-63bit "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 操作码, 0002 ARP 响应\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("64")]),s._v("-111bit "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 发送方 MAC 地址, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("94")]),s._v(":0c:98:6a:2a:97\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("112")]),s._v("-143bit "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 发送方 IP 协议地址, c0 a8 02 6a "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".2.106\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("144")]),s._v("-191bit "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 接收方 MAC 地址, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("34")]),s._v(":13:e8:5e:41:51\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192")]),s._v("-123bit "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 接收方 IP 协议地址"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("需对应协议类型"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", c0 a8 02 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("68")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("192.168")]),s._v(".2.106\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br")])])])]),s._v(" "),t("h2",{attrs:{id:"_05-rarp-逆地址解析协议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_05-rarp-逆地址解析协议"}},[s._v("#")]),s._v(" 05 - RARP 逆地址解析协议")]),s._v(" "),t("blockquote",[t("p",[s._v("具有本地磁盘的系统引导时, 一般从磁盘上的配置文件中读取 IP 地址. 无盘系统的 RARP 实现过程\n是从接口卡上读取唯一的硬件地址, 然后发送一份 RARP 请求广播, 请求某个主机响应该无盘系统的\nIP 地址.")])]),s._v(" "),t("h3",{attrs:{id:"rarp-协议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rarp-协议"}},[s._v("#")]),s._v(" RARP 协议")]),s._v(" "),t("p",[t("strong",[s._v("RARP 分组格式")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/05/rarp_format_001.webp"),alt:"RARP 分组格式"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("以太网帧类型代码 0x8035\n请求操作代码 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("\n应答操作代码 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"rarp-发送与接收"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#rarp-发送与接收"}},[s._v("#")]),s._v(" RARP 发送与接收")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("RARP 请求在网络上进行广播, 在分组中标明发送端的硬件地址, 以请求相应 IP 地址的响应. 应答通常\n  是单播传送的.\n\nARP 服务器通常是 TCP/IP 在内核中实现.\nRARP 服务器功能一般由用户进程提供.\n每个网络中有多个 RARP 服务器, 每个服务器对每个 RARP 请求都要发送应答. 发送请求的无盘系统一\n  般采用最先收到的 RARP 应答.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br")])]),t("h2",{attrs:{id:"_06-icmp-internet-控制报文协议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_06-icmp-internet-控制报文协议"}},[s._v("#")]),s._v(" 06 - ICMP Internet 控制报文协议")]),s._v(" "),t("blockquote",[t("p",[s._v("IP 层的一部分, 主要传递差错报文及其他需要注意的信息."),t("br"),s._v("\nICMP 通常被 IP 层或更高层协议使用.")]),s._v(" "),t("blockquote",[t("p",[s._v("确认 IP 包是否成功到达目的地址\n通知在发送过程中 IP 包被丢弃的原因")])])]),s._v(" "),t("h3",{attrs:{id:"icmp-控制报文协议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#icmp-控制报文协议"}},[s._v("#")]),s._v(" ICMP 控制报文协议")]),s._v(" "),t("p",[t("strong",[s._v("ICMP 报文封装")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/06/icmp_001.webp"),alt:"ICMP 报文封装"}})]),s._v(" "),t("p",[t("strong",[s._v("ICMP 报文")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/06/icmp_002.webp"),alt:"ICMP 报文"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v("-7bit "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" ICMP 报文类型, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("-127 为差错报文, "),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),t("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("128")]),s._v(" 为信息报文\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("-15bit "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" ICMP 报文代码, 与类型字段一起标识 ICMP 报文详细类型\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("16")]),s._v("-31bit "),t("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v(":")]),s._v(" 校验和\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("p",[t("strong",[s._v("ICMP 消息类型")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/06/icmp_003.webp"),alt:"ICMP 消息类型"}})]),s._v(" "),t("ul",[t("li",[t("p",[s._v("常见 ICMP 报文")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("请求回显\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" 操作包括请求回显"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("类型 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("和应答"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("类型 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" ICMP 报文\n目标不可达 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("类型 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    路由器或主机不能传递数据时使用. 如连接对方不存在的系统端口\n        网络不可达 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("类型 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(", 代码 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        主机不可达 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("类型 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(", 代码 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        协议不可达 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("类型 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(", 代码 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        端口不可达 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("类型 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(", 代码 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n源抑制报文 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("类型 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(", 代码 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    控制流量, 通知主机减少数据报流量. 停止则主机恢复传输速率\n超时报文 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("类型 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    无连接网络传输出现问题, 触发 ICMP 超时报文\n        传输超时 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("代码 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        分段重组超时 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("代码 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n时间戳请求\n    测试两台主机间数据报来回一次传输的时间\n        请求报文 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("类型 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n        应答报文 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("类型 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br"),t("span",{staticClass:"line-number"},[s._v("18")]),t("br")])]),t("ul",[t("li",[t("p",[s._v("不产生 ICMP 差错报文的情况")]),s._v(" "),t("div",{staticClass:"language- line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-text"}},[t("code",[s._v("1. ICMP 差错报文\n2. 目的地址是广播地址或多播地址的 IP 数据报\n3. 作为链路层广播的数据报\n4. 不是 IP 分片的第一片\n5. 源地址不是单个主机的数据报 (零地址, 环回地址, 广播地址, 多播地址)\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br")])])])])]),s._v(" "),t("li",[t("p",[s._v("ICMP 与 IP")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("ICMP 内容放在 IP 数据包的数据部分来发送的, 但是ICMP 主要是辅助 IP 的一部分功能, 所以\n  二者是同层的协议\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br")])])])]),s._v(" "),t("h3",{attrs:{id:"ping"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ping"}},[s._v("#")]),s._v(" Ping")]),s._v(" "),t("p",[t("strong",[s._v("Ping Request")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/06/icmp_ping_001.webp"),alt:"Ping Request"}})]),s._v(" "),t("p",[t("strong",[s._v("Ping Response")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/06/icmp_ping_002.webp"),alt:"Ping Response"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" 功能\n    验证网络连通性\n    统计响应时间和 TTL\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" 是在网络层, 没有端口的概念\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br")])]),t("h3",{attrs:{id:"icmp-相关应用"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#icmp-相关应用"}},[s._v("#")]),s._v(" ICMP 相关应用")]),s._v(" "),t("p",[t("strong",[s._v("ICMP 路径 MTU 探索")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/06/icmp_004.webp"),alt:"ICMP 路径 MTU 探索"}})]),s._v(" "),t("p",[t("strong",[s._v("ICMP 改变路由")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/06/icmp_005.webp"),alt:"ICMP 改变路由"}})]),s._v(" "),t("p",[t("strong",[s._v("ICMP 源点抑制")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/06/icmp_006.webp"),alt:"ICMP 源点抑制"}})]),s._v(" "),t("p",[t("strong",[s._v("ICMP Ping")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/06/icmp_007.webp"),alt:"ICMP Ping"}})]),s._v(" "),t("p",[t("strong",[s._v("ICMP traceroute")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/06/icmp_008.webp"),alt:"ICMP traceroute"}})]),s._v(" "),t("p",[t("strong",[s._v("ICMP 端口扫描")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/06/icmp_009.webp"),alt:"ICMP 端口扫描"}})]),s._v(" "),t("blockquote",[t("p",[s._v("只针对 UDP, TCP 可以通过建立连接来判断."),t("br"),s._v("\n注意即使 ICMP 端口不可达报文没有返回, 也不能断定端口一定就开着.")])]),s._v(" "),t("h2",{attrs:{id:"_07-ping-程序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_07-ping-程序"}},[s._v("#")]),s._v(" 07 - Ping 程序")]),s._v(" "),t("h3",{attrs:{id:"ping-2"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#ping-2"}},[s._v("#")]),s._v(" Ping")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" 程序是对两个 TCP/IP 系统连接性进行测试的基本工具. 只利用 ICMP 回显请求和回显应答报文,\n  不用经过传输层.\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("ping")]),s._v(" 服务器一般在内核中实现 ICMP 功能.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br")])]),t("h3",{attrs:{id:"lan-ping-示例"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#lan-ping-示例"}},[s._v("#")]),s._v(" LAN Ping 示例")]),s._v(" "),t("p",[t("strong",[s._v("Ping ARP 请求")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/07/lan_ping_arp_001.webp"),alt:"Ping ARP 请求"}})]),s._v(" "),t("p",[t("strong",[s._v("Ping ARP 回复")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/07/lan_ping_arp_002.webp"),alt:"Ping ARP 回复"}})]),s._v(" "),t("p",[t("strong",[s._v("Ping ICMP 请求")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/07/lan_ping_icmp_001.webp"),alt:"Ping ICMP 请求"}})]),s._v(" "),t("p",[t("strong",[s._v("Ping ICMP 回复")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/07/lan_ping_icmp_002.webp"),alt:"Ping ICMP 回复"}})]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(". 源主机发起 Ping 请求时, 会首先查询自己的 MAC 地址表"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("ARP 高速缓冲"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", 如果没有, 就需要发\n     送ARP 广播包. 交换机接收到 ARP 报文后, 会检索自己的 MAC 地址表, 有则返回, 没有则向所\n     有主机发送 ARP 广播, 其他主机收到后, 非目的主机丢弃该报文, 目的主机响应该报文, 同时缓\n     存源主机 MAC 地址.\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(". 源主机收到目的主机响应后, 根据其 MAC 地址, 封装 ICMP 协议请求报文并发送\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(". 目的主机收到 ICMP 回显请求, 执行响应\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br")])]),t("h3",{attrs:{id:"wan-ping"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#wan-ping"}},[s._v("#")]),s._v(" WAN Ping")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("当源主机与目的主机不在同一网段时, 会由网关转发.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br")])]),t("h2",{attrs:{id:"_08-traceroute-程序"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_08-traceroute-程序"}},[s._v("#")]),s._v(" 08 - Traceroute 程序")]),s._v(" "),t("blockquote",[t("p",[s._v("Traceroute 程序可以让我们看到 IP 数据报从一台主机传到另一台主机所经过的路由.")])]),s._v(" "),t("h3",{attrs:{id:"traceroute"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#traceroute"}},[s._v("#")]),s._v(" Traceroute")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[s._v("程序使用 ICMP 报文和 IP 首部中的 TTL 字段.\n    TTL 字段是由发送端初始设置一个 8bit 字段.\n    每个处理数据报的路由器都需要把 TTL 字段的值减 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", 或数据报在路由器上停留的秒数.\n    当路由器收到一份 IP 数据报, 如果其 TTL 字段是 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0")]),s._v(" 或 "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(", 则路由器不转发该数据报, 路由器\n      将该数据报丢弃, 并给信号源机发一份 ICMP "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"超时"')]),s._v(" 信息.\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("traceroute")]),s._v(" 程序获取该 ICMP 信息的 IP 报文的信源地址即该路由器的 IP 地址.\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("traceroute")]),s._v(" 程序发送给目的主机的 UDP 数据报, 一般都选择一个不可能的值作为 UDP 的端口,\n      当 UDP 数据报到达目的主机时, 使目的主机产生一个 "),t("span",{pre:!0,attrs:{class:"token string"}},[s._v('"端口不可达"')]),s._v(" ICMP 报文.\n    "),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("traceroute")]),s._v(" 根剧区分接收到的 ICMP 报文是超时还是端口不可达, 即可判断何时结束.\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br")])]),t("p",[t("strong",[s._v("Traceroute 流程")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/08/traceroute_001.webp"),alt:"Traceroute 流程"}})]),s._v(" "),t("p",[t("strong",[s._v("Traceroute TTL 1")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/08/traceroute_002.webp"),alt:"Traceroute TTL 1"}})]),s._v(" "),t("p",[t("strong",[s._v("Traceroute TTL 2")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/08/traceroute_003.webp"),alt:"Traceroute TTL 2"}})]),s._v(" "),t("p",[t("strong",[s._v("Traceroute ICMP 超时")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/08/traceroute_004.webp"),alt:"Traceroute ICMP 超时"}})]),s._v(" "),t("p",[t("strong",[s._v("Traceroute ICMP 端口不可达")]),t("br"),s._v(" "),t("img",{attrs:{src:s.$withBase("/image/note/tcpip-illustrated/08/traceroute_005.webp"),alt:"Traceroute 端口不可达"}})]),s._v(" "),t("ul",[t("li",[t("p",[s._v("指令")]),s._v(" "),t("div",{staticClass:"language-bash line-numbers-mode"},[t("pre",{pre:!0,attrs:{class:"language-bash"}},[t("code",[t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@ ~"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),t("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# traceroute 1.1.1.1")]),s._v("\n"),t("span",{pre:!0,attrs:{class:"token function"}},[s._v("traceroute")]),s._v(" to "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.1 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(", "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("30")]),s._v(" hops max, "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("60")]),s._v(" byte packets\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v("  * * *\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100.104")]),s._v(".251.210 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("100.104")]),s._v(".251.210"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.653")]),s._v(" ms *  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("0.835")]),s._v(" ms\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v("  * * *\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("101.227")]),s._v(".217.33 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("101.227")]),s._v(".217.33"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.983")]),s._v(" ms "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.196")]),s._v(".4.217 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.196")]),s._v(".4.217"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.700")]),s._v(" ms "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.196")]),s._v(".4.213 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.196")]),s._v(".4.213"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.214")]),s._v(" ms\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("182.254")]),s._v(".127.120 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("182.254")]),s._v(".127.120"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.877")]),s._v(" ms  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.935")]),s._v(" ms "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("182.254")]),s._v(".127.119 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("182.254")]),s._v(".127.119"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.979")]),s._v(" ms\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6")]),s._v("  * "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("101.227")]),s._v(".217.37 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("101.227")]),s._v(".217.37"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.267")]),s._v(" ms *\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("7")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("101.89")]),s._v(".240.37 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("101.89")]),s._v(".240.37"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("2.740")]),s._v(" ms "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("101.89")]),s._v(".240.57 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("101.89")]),s._v(".240.57"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.665")]),s._v(" ms "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("101.95")]),s._v(".120.178 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("101.95")]),s._v(".120.178"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.875")]),s._v(" ms\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("101.95")]),s._v(".206.17 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("101.95")]),s._v(".206.17"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.283")]),s._v(" ms "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("124.74")]),s._v(".166.217 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("124.74")]),s._v(".166.217"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.593")]),s._v(" ms "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("124.74")]),s._v(".166.149 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("124.74")]),s._v(".166.149"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10.170")]),s._v(" ms\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("9")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("202.97")]),s._v(".12.210 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("202.97")]),s._v(".12.210"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("6.108")]),s._v(" ms "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("61.152")]),s._v(".24.18 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("61.152")]),s._v(".24.18"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("5.225")]),s._v(" ms "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("61.152")]),s._v(".86.142 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("61.152")]),s._v(".86.142"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.788")]),s._v(" ms\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("10")]),s._v("  * * "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("202.97")]),s._v(".57.25 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("202.97")]),s._v(".57.25"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("19.366")]),s._v(" ms\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("11")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("202.97")]),s._v(".12.201 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("202.97")]),s._v(".12.201"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("3.835")]),s._v(" ms "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("202.97")]),s._v(".12.190 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("202.97")]),s._v(".12.190"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.261")]),s._v(" ms "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("202.97")]),s._v(".33.154 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("202.97")]),s._v(".33.154"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("4.667")]),s._v(" ms\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("12")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("202.97")]),s._v(".50.10 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("202.97")]),s._v(".50.10"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("179.395")]),s._v(" ms "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("202.97")]),s._v(".43.234 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("202.97")]),s._v(".43.234"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("173.581")]),s._v(" ms "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("202.97")]),s._v(".58.178 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("202.97")]),s._v(".58.178"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("171.721")]),s._v(" ms\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("202.97")]),s._v(".92.37 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("202.97")]),s._v(".92.37"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("169.941")]),s._v(" ms  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("164.142")]),s._v(" ms "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("202.97")]),s._v(".90.118 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("202.97")]),s._v(".90.118"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("153.497")]),s._v(" ms\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("14")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("218.30")]),s._v(".54.214 "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("218.30")]),s._v(".54.214"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("174.118")]),s._v(" ms  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("185.178")]),s._v(" ms  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("173.972")]),s._v(" ms\n"),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("15")]),s._v("  * * one.one.one.one "),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("1.1")]),s._v(".1.1"),t("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("  "),t("span",{pre:!0,attrs:{class:"token number"}},[s._v("161.288")]),s._v(" ms\n")])]),s._v(" "),t("div",{staticClass:"line-numbers-wrapper"},[t("span",{staticClass:"line-number"},[s._v("1")]),t("br"),t("span",{staticClass:"line-number"},[s._v("2")]),t("br"),t("span",{staticClass:"line-number"},[s._v("3")]),t("br"),t("span",{staticClass:"line-number"},[s._v("4")]),t("br"),t("span",{staticClass:"line-number"},[s._v("5")]),t("br"),t("span",{staticClass:"line-number"},[s._v("6")]),t("br"),t("span",{staticClass:"line-number"},[s._v("7")]),t("br"),t("span",{staticClass:"line-number"},[s._v("8")]),t("br"),t("span",{staticClass:"line-number"},[s._v("9")]),t("br"),t("span",{staticClass:"line-number"},[s._v("10")]),t("br"),t("span",{staticClass:"line-number"},[s._v("11")]),t("br"),t("span",{staticClass:"line-number"},[s._v("12")]),t("br"),t("span",{staticClass:"line-number"},[s._v("13")]),t("br"),t("span",{staticClass:"line-number"},[s._v("14")]),t("br"),t("span",{staticClass:"line-number"},[s._v("15")]),t("br"),t("span",{staticClass:"line-number"},[s._v("16")]),t("br"),t("span",{staticClass:"line-number"},[s._v("17")]),t("br")])])]),s._v(" "),t("li",[t("p",[s._v("注意")]),s._v(" "),t("p",[s._v("每个 IP 数据报所有的路由路径都有可能不同, 所以 traceroute 所探测的只是大概路径.")])])]),s._v(" "),t("h2",{attrs:{id:"_09-ip-选路"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_09-ip-选路"}},[s._v("#")]),s._v(" 09 - IP 选路")]),s._v(" "),t("h2",{attrs:{id:"_10-动态选路协议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_10-动态选路协议"}},[s._v("#")]),s._v(" 10 - 动态选路协议")]),s._v(" "),t("h2",{attrs:{id:"_11-udp-用户数据报协议"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_11-udp-用户数据报协议"}},[s._v("#")]),s._v(" 11 - UDP 用户数据报协议")]),s._v(" "),t("h2",{attrs:{id:"_12-广播和多播"}},[t("a",{staticClass:"header-anchor",attrs:{href:"#_12-广播和多播"}},[s._v("#")]),s._v(" 12 - 广播和多播")]),s._v(" "),t("blockquote",[t("p",[s._v("广播和多播仅适用于 UDP")])])])}),[],!1,null,null,null);a.default=e.exports}}]);