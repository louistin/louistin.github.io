<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>TCP/IP è¯¦è§£ | ğŸ”ã®é ˜åŸŸ</title>
    <meta name="generator" content="VuePress 1.4.1">
    <link rel="icon" href="/image/favicon.png">
    <meta name="description" content="ã€€æˆ‘ä»¬ç«‹è¶³äºç¾åˆ©åšåˆä¼—å›½, é’ˆå¯¹å¹´æ»¡18å‘¨å²éå¤§é™†å…¨çƒåäººå¼€å‘, å—åŒ—ç¾æ³•å¾‹ä¿æŠ¤.ã€€ ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€æœªç¶“æˆæ¬Šç¦æ­¢å¤åˆ¶æˆ–å»ºç«‹é•œåƒ. ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€ã€€We are based in the United States of America, for over 18 years of age non-mainland Chinese open world, by the North American legal protection. Unauthorized reproduction prohibited or create mirror.">
    <link rel="preload" href="/assets/css/0.styles.eda1073d.css" as="style"><link rel="preload" href="/assets/js/app.5aa78949.js" as="script"><link rel="preload" href="/assets/js/2.db8a1bd9.js" as="script"><link rel="preload" href="/assets/js/34.1527656e.js" as="script"><link rel="prefetch" href="/assets/js/10.cb22b5cc.js"><link rel="prefetch" href="/assets/js/11.7fc433a5.js"><link rel="prefetch" href="/assets/js/12.26e9cadb.js"><link rel="prefetch" href="/assets/js/13.1258d0f5.js"><link rel="prefetch" href="/assets/js/14.99ec5e93.js"><link rel="prefetch" href="/assets/js/15.5e075e9b.js"><link rel="prefetch" href="/assets/js/16.3ae89ebf.js"><link rel="prefetch" href="/assets/js/17.a0578cc8.js"><link rel="prefetch" href="/assets/js/18.57573e35.js"><link rel="prefetch" href="/assets/js/19.1921cef9.js"><link rel="prefetch" href="/assets/js/20.21e6a458.js"><link rel="prefetch" href="/assets/js/21.85d787bf.js"><link rel="prefetch" href="/assets/js/22.463f771e.js"><link rel="prefetch" href="/assets/js/23.a24c9494.js"><link rel="prefetch" href="/assets/js/24.4e9dffaf.js"><link rel="prefetch" href="/assets/js/25.48966cca.js"><link rel="prefetch" href="/assets/js/26.79a3a1f7.js"><link rel="prefetch" href="/assets/js/27.d86ae0b6.js"><link rel="prefetch" href="/assets/js/28.3085660e.js"><link rel="prefetch" href="/assets/js/29.b25e9aa3.js"><link rel="prefetch" href="/assets/js/3.bfe9edf0.js"><link rel="prefetch" href="/assets/js/30.32eb4625.js"><link rel="prefetch" href="/assets/js/31.c255a7cd.js"><link rel="prefetch" href="/assets/js/32.d4a5e1b3.js"><link rel="prefetch" href="/assets/js/33.939416f6.js"><link rel="prefetch" href="/assets/js/35.31254244.js"><link rel="prefetch" href="/assets/js/36.4c9eea64.js"><link rel="prefetch" href="/assets/js/37.dcba8e22.js"><link rel="prefetch" href="/assets/js/38.660f4f18.js"><link rel="prefetch" href="/assets/js/39.36808ac4.js"><link rel="prefetch" href="/assets/js/4.721e6361.js"><link rel="prefetch" href="/assets/js/40.5e3d825d.js"><link rel="prefetch" href="/assets/js/41.8bc35558.js"><link rel="prefetch" href="/assets/js/42.3d9ee979.js"><link rel="prefetch" href="/assets/js/43.d8a9355a.js"><link rel="prefetch" href="/assets/js/44.3b96fdab.js"><link rel="prefetch" href="/assets/js/45.5a397a89.js"><link rel="prefetch" href="/assets/js/46.2c015a12.js"><link rel="prefetch" href="/assets/js/47.cb620ad3.js"><link rel="prefetch" href="/assets/js/48.63e77fd7.js"><link rel="prefetch" href="/assets/js/49.3a1743f4.js"><link rel="prefetch" href="/assets/js/5.9c8aa7de.js"><link rel="prefetch" href="/assets/js/50.858e22ae.js"><link rel="prefetch" href="/assets/js/51.d5ea8da3.js"><link rel="prefetch" href="/assets/js/6.cfcb9227.js"><link rel="prefetch" href="/assets/js/7.7ef2cd09.js"><link rel="prefetch" href="/assets/js/8.8cae79fc.js"><link rel="prefetch" href="/assets/js/9.116ce45e.js">
    <link rel="stylesheet" href="/assets/css/0.styles.eda1073d.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">ğŸ”ã®é ˜åŸŸ</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">
  ä¸»é¡µ
</a></div><div class="nav-item"><a href="/cs/" class="nav-link">
  è®¡ç®—æœºåŸºç¡€
</a></div><div class="nav-item"><a href="/network/" class="nav-link">
  ç½‘ç»œç¼–ç¨‹
</a></div><div class="nav-item"><a href="/server/" class="nav-link">
  åç«¯å¼€å‘
</a></div><div class="nav-item"><a href="/web/" class="nav-link">
  å‰ç«¯å¼€å‘
</a></div><div class="nav-item"><a href="/opensource/" class="nav-link">
  å¼€æºè½¯ä»¶
</a></div><div class="nav-item"><a href="/note/" class="nav-link router-link-active">
  è¯»ä¹¦ç¬”è®°
</a></div><div class="nav-item"><a href="/manual/" class="nav-link">
  å¼€å‘æ‰‹å†Œ
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  å…³äº
</a></div> <a href="https://github.com/louistin/blog.liteman.git" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">
  ä¸»é¡µ
</a></div><div class="nav-item"><a href="/cs/" class="nav-link">
  è®¡ç®—æœºåŸºç¡€
</a></div><div class="nav-item"><a href="/network/" class="nav-link">
  ç½‘ç»œç¼–ç¨‹
</a></div><div class="nav-item"><a href="/server/" class="nav-link">
  åç«¯å¼€å‘
</a></div><div class="nav-item"><a href="/web/" class="nav-link">
  å‰ç«¯å¼€å‘
</a></div><div class="nav-item"><a href="/opensource/" class="nav-link">
  å¼€æºè½¯ä»¶
</a></div><div class="nav-item"><a href="/note/" class="nav-link router-link-active">
  è¯»ä¹¦ç¬”è®°
</a></div><div class="nav-item"><a href="/manual/" class="nav-link">
  å¼€å‘æ‰‹å†Œ
</a></div><div class="nav-item"><a href="/about/" class="nav-link">
  å…³äº
</a></div> <a href="https://github.com/louistin/blog.liteman.git" target="_blank" rel="noopener noreferrer" class="repo-link">
    GitHub
    <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></nav>  <ul class="sidebar-links"><li><a href="/note/" class="sidebar-link">è¯»ä¹¦ç¬”è®°</a></li><li><a href="/note/Linux-UNIX ç³»ç»Ÿç¼–ç¨‹æ‰‹å†Œ.html" class="sidebar-link">Linux-UNIX ç³»ç»Ÿç¼–ç¨‹æ‰‹å†Œ</a></li><li><a href="/note/UNIX-LINUX ç¼–ç¨‹å®è·µæ•™ç¨‹.html" class="sidebar-link">UNIX-LINUX ç¼–ç¨‹å®è·µæ•™ç¨‹</a></li><li><a href="/note/TCP-IP è¯¦è§£.html" class="active sidebar-link">TCP/IP è¯¦è§£</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/note/TCP-IP è¯¦è§£.html#_01-æ¦‚è¿°" class="sidebar-link">01 - æ¦‚è¿°</a></li><li class="sidebar-sub-header"><a href="/note/TCP-IP è¯¦è§£.html#_02-é“¾è·¯å±‚" class="sidebar-link">02 - é“¾è·¯å±‚</a></li><li class="sidebar-sub-header"><a href="/note/TCP-IP è¯¦è§£.html#_03-ip-ç½‘é™…åè®®" class="sidebar-link">03 - IP ç½‘é™…åè®®</a></li><li class="sidebar-sub-header"><a href="/note/TCP-IP è¯¦è§£.html#_04-arp-åœ°å€è§£æåè®®" class="sidebar-link">04 - ARP åœ°å€è§£æåè®®</a></li><li class="sidebar-sub-header"><a href="/note/TCP-IP è¯¦è§£.html#_05-rarp-é€†åœ°å€è§£æåè®®" class="sidebar-link">05 - RARP é€†åœ°å€è§£æåè®®</a></li><li class="sidebar-sub-header"><a href="/note/TCP-IP è¯¦è§£.html#_06-icmp-internet-æ§åˆ¶æŠ¥æ–‡åè®®" class="sidebar-link">06 - ICMP Internet æ§åˆ¶æŠ¥æ–‡åè®®</a></li><li class="sidebar-sub-header"><a href="/note/TCP-IP è¯¦è§£.html#_07-ping-ç¨‹åº" class="sidebar-link">07 - Ping ç¨‹åº</a></li><li class="sidebar-sub-header"><a href="/note/TCP-IP è¯¦è§£.html#_08-traceroute-ç¨‹åº" class="sidebar-link">08 - Traceroute ç¨‹åº</a></li><li class="sidebar-sub-header"><a href="/note/TCP-IP è¯¦è§£.html#_09-ip-é€‰è·¯" class="sidebar-link">09 - IP é€‰è·¯</a></li><li class="sidebar-sub-header"><a href="/note/TCP-IP è¯¦è§£.html#_10-åŠ¨æ€é€‰è·¯åè®®" class="sidebar-link">10 - åŠ¨æ€é€‰è·¯åè®®</a></li><li class="sidebar-sub-header"><a href="/note/TCP-IP è¯¦è§£.html#_11-udp-ç”¨æˆ·æ•°æ®æŠ¥åè®®" class="sidebar-link">11 - UDP ç”¨æˆ·æ•°æ®æŠ¥åè®®</a></li><li class="sidebar-sub-header"><a href="/note/TCP-IP è¯¦è§£.html#_12-å¹¿æ’­å’Œå¤šæ’­" class="sidebar-link">12 - å¹¿æ’­å’Œå¤šæ’­</a></li></ul></li><li><a href="/note/MySQL å¿…çŸ¥å¿…ä¼š.html" class="sidebar-link">MySQL å¿…çŸ¥å¿…ä¼š</a></li><li><a href="/note/ç¬¬ä¸€æœ¬ Docker ä¹¦.html" class="sidebar-link">ç¬¬ä¸€æœ¬ Docker ä¹¦</a></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="tcp-ip-è¯¦è§£"><a href="#tcp-ip-è¯¦è§£" class="header-anchor">#</a> TCP/IP è¯¦è§£</h1> <blockquote><p align="left" style="font-family:Arial;font-size:80%;color:#C0C0C0;">å…¨æ–‡å­—æ•° 2227 words Â |Â  é˜…è¯»æ—¶é—´ 12 mins</p></blockquote> <p></p><div class="table-of-contents"><ul><li><a href="#_01-æ¦‚è¿°">01 - æ¦‚è¿°</a><ul><li><a href="#åˆ†å±‚">åˆ†å±‚</a></li><li><a href="#äº’è”ç½‘åœ°å€">äº’è”ç½‘åœ°å€</a></li><li><a href="#å°è£…">å°è£…</a></li><li><a href="#åˆ†ç”¨">åˆ†ç”¨</a></li><li><a href="#å®¢æˆ·-æœåŠ¡å™¨æ¨¡å‹">å®¢æˆ·-æœåŠ¡å™¨æ¨¡å‹</a></li><li><a href="#ç«¯å£å·">ç«¯å£å·</a></li></ul></li><li><a href="#_02-é“¾è·¯å±‚">02 - é“¾è·¯å±‚</a><ul><li><a href="#ç¯å›æ¥å£">ç¯å›æ¥å£</a></li><li><a href="#æœ€å¤§ä¼ è¾“å•å…ƒ-mtu">æœ€å¤§ä¼ è¾“å•å…ƒ MTU</a></li></ul></li><li><a href="#_03-ip-ç½‘é™…åè®®">03 - IP ç½‘é™…åè®®</a><ul><li><a href="#ip-é¦–éƒ¨">IP é¦–éƒ¨</a></li><li><a href="#ip-è·¯ç”±é€‰æ‹©">IP è·¯ç”±é€‰æ‹©</a></li><li><a href="#å­ç½‘">å­ç½‘</a></li><li><a href="#ç‰¹æ®Šæƒ…å†µ-ip">ç‰¹æ®Šæƒ…å†µ IP</a></li><li><a href="#å‘½ä»¤">å‘½ä»¤</a></li><li><a href="#faq">FAQ</a></li></ul></li><li><a href="#_04-arp-åœ°å€è§£æåè®®">04 - ARP åœ°å€è§£æåè®®</a><ul><li><a href="#arp-åè®®">ARP åè®®</a></li><li><a href="#arp-é«˜é€Ÿç¼“å­˜">ARP é«˜é€Ÿç¼“å­˜</a></li><li><a href="#arp-åˆ†ç»„æ ¼å¼">ARP åˆ†ç»„æ ¼å¼</a></li></ul></li><li><a href="#_05-rarp-é€†åœ°å€è§£æåè®®">05 - RARP é€†åœ°å€è§£æåè®®</a><ul><li><a href="#rarp-åè®®">RARP åè®®</a></li><li><a href="#rarp-å‘é€ä¸æ¥æ”¶">RARP å‘é€ä¸æ¥æ”¶</a></li></ul></li><li><a href="#_06-icmp-internet-æ§åˆ¶æŠ¥æ–‡åè®®">06 - ICMP Internet æ§åˆ¶æŠ¥æ–‡åè®®</a><ul><li><a href="#icmp-æ§åˆ¶æŠ¥æ–‡åè®®">ICMP æ§åˆ¶æŠ¥æ–‡åè®®</a></li><li><a href="#ping">Ping</a></li><li><a href="#icmp-ç›¸å…³åº”ç”¨">ICMP ç›¸å…³åº”ç”¨</a></li></ul></li><li><a href="#_07-ping-ç¨‹åº">07 - Ping ç¨‹åº</a><ul><li><a href="#ping">Ping</a></li><li><a href="#lan-ping-ç¤ºä¾‹">LAN Ping ç¤ºä¾‹</a></li><li><a href="#wan-ping">WAN Ping</a></li></ul></li><li><a href="#_08-traceroute-ç¨‹åº">08 - Traceroute ç¨‹åº</a><ul><li><a href="#traceroute">Traceroute</a></li></ul></li><li><a href="#_09-ip-é€‰è·¯">09 - IP é€‰è·¯</a></li><li><a href="#_10-åŠ¨æ€é€‰è·¯åè®®">10 - åŠ¨æ€é€‰è·¯åè®®</a></li><li><a href="#_11-udp-ç”¨æˆ·æ•°æ®æŠ¥åè®®">11 - UDP ç”¨æˆ·æ•°æ®æŠ¥åè®®</a></li><li><a href="#_12-å¹¿æ’­å’Œå¤šæ’­">12 - å¹¿æ’­å’Œå¤šæ’­</a></li></ul></div><p></p> <hr> <h2 id="_01-æ¦‚è¿°"><a href="#_01-æ¦‚è¿°" class="header-anchor">#</a> 01 - æ¦‚è¿°</h2> <h3 id="åˆ†å±‚"><a href="#åˆ†å±‚" class="header-anchor">#</a> åˆ†å±‚</h3> <p><strong>TCP/IP åè®®æ—åˆ†å±‚</strong><br> <img src="/image/note/tcpip-illustrated/01/tcpip_002.webp" alt="TCP/IP åè®®æ—åˆ†å±‚"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>é“¾è·¯å±‚
    è®¾å¤‡é©±åŠ¨ç¨‹åºåŠæ¥å£å¡
ç½‘ç»œå±‚
    IP ICMP IGMP
ä¼ è¾“å±‚
    TCP UNP
åº”ç”¨å±‚
    Telnet FTP SMTP SNMP
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="äº’è”ç½‘åœ°å€"><a href="#äº’è”ç½‘åœ°å€" class="header-anchor">#</a> äº’è”ç½‘åœ°å€</h3> <p><strong>äº”ç±»IPåœ°å€</strong><br> <img src="/image/note/tcpip-illustrated/01/ip_address_001.webp" alt="äº”ç±» IP åœ°å€"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>A: <span class="token number">0.0</span>.0.0   - <span class="token number">127.255</span>.255.255
B: <span class="token number">128.0</span>.0.0 - <span class="token number">191.255</span>.255.255
C: <span class="token number">192.0</span>.0.0 - <span class="token number">223.255</span>.255.255
D: <span class="token number">224.0</span>.0.0 - <span class="token number">239.255</span>.255.255
E: <span class="token number">240.0</span>.0.0 - <span class="token number">247.255</span>.255.255

å•æ’­ ç»„æ’­ å¹¿æ’­
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="å°è£…"><a href="#å°è£…" class="header-anchor">#</a> å°è£…</h3> <p><strong>æ•°æ®å°è£…</strong><br> <img src="/image/note/tcpip-illustrated/01/data_package_001.webp" alt="æ•°æ®å°è£…"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>TCP -<span class="token operator">&gt;</span> IP çš„æ•°æ®å•å…ƒç§°ä¸º TCP æ®µ<span class="token punctuation">(</span>TCP segment<span class="token punctuation">)</span>
IP -<span class="token operator">&gt;</span> ç½‘ç»œæ¥å£å±‚ çš„æ•°æ®å•å…ƒç§°ä¸º IP æ•°æ®æŠ¥<span class="token punctuation">(</span>IP datagram<span class="token punctuation">)</span>
ä»¥å¤ªç½‘ä¼ è¾“çš„æ¯”ç‰¹æµç§°ä¸º å¸§<span class="token punctuation">(</span>Frame<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="åˆ†ç”¨"><a href="#åˆ†ç”¨" class="header-anchor">#</a> åˆ†ç”¨</h3> <p><strong>æ•°æ®åˆ†ç”¨</strong><br> <img src="/image/note/tcpip-illustrated/01/data_demultiplexing_001.webp" alt="æ•°æ®åˆ†ç”¨"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>Demultiplexing

ç›®çš„ä¸»æœºæ”¶åˆ°ä»¥å¤ªç½‘æ•°æ®å¸§æ—¶, æ•°æ®å¼€å§‹ä»åè®®æ ˆä¸­ç”±åº•å‘ä¸Šå‡, åŒæ—¶å»æ‰å„å±‚åè®®åŠ ä¸ŠæŠ¥æ–‡é¦–éƒ¨.
  æ¯å±‚åè®®ç›’éƒ½è¦æ£€æŸ¥æŠ¥æ–‡é¦–éƒ¨ä¸­çš„åè®®æ ‡è¯†, ä»¥ç¡®å®šæ¥å—æ•°æ®çš„ä¸Šå±‚åè®®. è¿™ä¸ªè¿‡ç¨‹ç§°ä½œåˆ†ç”¨.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="å®¢æˆ·-æœåŠ¡å™¨æ¨¡å‹"><a href="#å®¢æˆ·-æœåŠ¡å™¨æ¨¡å‹" class="header-anchor">#</a> å®¢æˆ·-æœåŠ¡å™¨æ¨¡å‹</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>é‡å¤å‹
å¹¶å‘å‹
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="ç«¯å£å·"><a href="#ç«¯å£å·" class="header-anchor">#</a> ç«¯å£å·</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>/etc/service æŸ¥çœ‹
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_02-é“¾è·¯å±‚"><a href="#_02-é“¾è·¯å±‚" class="header-anchor">#</a> 02 - é“¾è·¯å±‚</h2> <ul><li>é“¾è·¯å±‚
<ul><li>ä¸º IP æ¨¡å—å‘é€å’Œæ¥æ”¶ IP æ•°æ®æŠ¥</li> <li>ä¸º ARP æ¨¡å—å‘é€ ARP è¯·æ±‚å’Œæ¥æ”¶ ARP åº”ç­”</li> <li>ä¸º RARP å‘é€ RARP è¯·æ±‚å’Œæ¥æ”¶ RARP åº”ç­”</li></ul></li></ul> <h3 id="ç¯å›æ¥å£"><a href="#ç¯å›æ¥å£" class="header-anchor">#</a> ç¯å›æ¥å£</h3> <p><strong>ç¯å›æ¥å£å¤„ç†IPæ•°æ®æŠ¥æµç¨‹</strong><br> <img src="/image/note/tcpip-illustrated/02/lookback_interface_001.webp" alt="ç¯å›æ¥å£å¤„ç†IPæ•°æ®æŠ¥æµç¨‹"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>Loopback Interface
å…è®¸è¿è¡Œåœ¨åŒä¸€å°ä¸»æœºä¸Šçš„å®¢æˆ·ç¨‹åºå’ŒæœåŠ¡å™¨ç¨‹åºé€šè¿‡ TCP/IP è¿›è¡Œé€šä¿¡.
    <span class="token number">127.0</span>.0.1<span class="token punctuation">(</span>å‘½åä¸º localhost<span class="token punctuation">)</span>

<span class="token number">1</span>. ä¼ ç»™ç¯å›åœ°å€çš„ä»»ä½•æ•°æ®å‡ä½œä¸º IP è¾“å…¥
<span class="token number">2</span>. ä¼ ç»™å¹¿æ’­å’Œå¤šæ’­åœ°å€çš„æ•°æ®æŠ¥ä¼šå¤åˆ¶ä¸€ä»½ä¼ ç»™ç¯å›æ¥å£, ç„¶åé€åˆ°ä»¥å¤ªç½‘ä¸Š
<span class="token number">3</span>. ä»»ä½•ä¼ ç»™è¯¥ä¸»æœº IP åœ°å€çš„æ•°æ®å‡é€åˆ°ç¯å›æ¥å£
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h3 id="æœ€å¤§ä¼ è¾“å•å…ƒ-mtu"><a href="#æœ€å¤§ä¼ è¾“å•å…ƒ-mtu" class="header-anchor">#</a> æœ€å¤§ä¼ è¾“å•å…ƒ MTU</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>MTU: é“¾è·¯å±‚ä»¥å¤ªç½‘åè®®ç­‰å¯¹åº”çš„æ•°æ®å¸§é•¿åº¦æœ€å¤§å€¼<span class="token punctuation">(</span>ä¸åŒ…æ‹¬ä»¥å¤ªç½‘é¦–éƒ¨/å°¾éƒ¨<span class="token punctuation">)</span>
    ä»¥å¤ªç½‘ MTU <span class="token builtin class-name">:</span> <span class="token number">1500</span>
    Internet MTU <span class="token builtin class-name">:</span> <span class="token number">576</span>
    IP å±‚æ•°æ®æŠ¥é•¿åº¦è¶…å‡ºé“¾è·¯å±‚ MTU æ—¶, IP å±‚éœ€è¦è¿›è¡Œåˆ†ç‰‡<span class="token punctuation">(</span>fragmentation<span class="token punctuation">)</span>

è·¯å¾„ MTU: ä¸¤å°é€šä¿¡ä¸»æœºè·¯å¾„ä¸­æœ€å° MTU
    è·¯å¾„ MTU å—ä¸¤ç«¯å„è‡ªæ–¹å‘é€‰è·¯ä¸åŒ, ä¸¤å°ä¸»æœºé—´ MTU å€¼å¯èƒ½ä¸ä¸€æ ·
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@ ~<span class="token punctuation">]</span><span class="token comment"># ifconfig -a</span>
docker0: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">409</span><span class="token operator"><span class="token file-descriptor important">9</span>&lt;</span>UP,BROADCAST,MULTICAST<span class="token operator">&gt;</span>  mtu <span class="token number">1500</span>
        inet <span class="token number">172.18</span>.0.1  netmask <span class="token number">255.255</span>.0.0  broadcast <span class="token number">172.18</span>.255.255
        inet6 fe80::42:1eff:fe10:960f  prefixlen <span class="token number">64</span>  scopeid 0x2<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>link<span class="token operator">&gt;</span>
        ether 02:42:1e:10:96:0f  txqueuelen <span class="token number">0</span>  <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>
        RX packets <span class="token number">624</span>  bytes <span class="token number">106169</span> <span class="token punctuation">(</span><span class="token number">103.6</span> KiB<span class="token punctuation">)</span>
        RX errors <span class="token number">0</span>  dropped <span class="token number">0</span>  overruns <span class="token number">0</span>  frame <span class="token number">0</span>
        TX packets <span class="token number">502</span>  bytes <span class="token number">1028258</span> <span class="token punctuation">(</span><span class="token number">1004.1</span> KiB<span class="token punctuation">)</span>
        TX errors <span class="token number">0</span>  dropped <span class="token number">0</span> overruns <span class="token number">0</span>  carrier <span class="token number">0</span>  collisions <span class="token number">0</span>

<span class="token comment"># eth0 ä»¥å¤ªç½‘æ¥å£, æ”¯æŒä»¥å¤ªç½‘åè®®</span>
eth0: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">416</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,BROADCAST,RUNNING,MULTICAST<span class="token operator">&gt;</span>  mtu <span class="token number">1500</span>
        inet <span class="token number">172.17</span>.0.2  netmask <span class="token number">255.255</span>.240.0  broadcast <span class="token number">172.17</span>.15.255
        inet6 fe80::5054:ff:fe1d:9861  prefixlen <span class="token number">64</span>  scopeid 0x2<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>link<span class="token operator">&gt;</span>
        ether <span class="token number">52</span>:54:00:1d:98:61  txqueuelen <span class="token number">1000</span>  <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>
        RX packets <span class="token number">9750326</span>  bytes <span class="token number">2354351488</span> <span class="token punctuation">(</span><span class="token number">2.1</span> GiB<span class="token punctuation">)</span>
        RX errors <span class="token number">0</span>  dropped <span class="token number">0</span>  overruns <span class="token number">0</span>  frame <span class="token number">0</span>
        TX packets <span class="token number">9518774</span>  bytes <span class="token number">1918820423</span> <span class="token punctuation">(</span><span class="token number">1.7</span> GiB<span class="token punctuation">)</span>
        TX errors <span class="token number">0</span>  dropped <span class="token number">0</span> overruns <span class="token number">0</span>  carrier <span class="token number">0</span>  collisions <span class="token number">0</span>

<span class="token comment"># loopback æ¥å£, æ”¯æŒ loopback åè®®</span>
lo: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">7</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,LOOPBACK,RUNNING<span class="token operator">&gt;</span>  mtu <span class="token number">65536</span>
        inet <span class="token number">127.0</span>.0.1  netmask <span class="token number">255.0</span>.0.0
        inet6 ::1  prefixlen <span class="token number">128</span>  scopeid 0x1<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>host<span class="token operator">&gt;</span>
        loop  txqueuelen <span class="token number">1000</span>  <span class="token punctuation">(</span>Local Loopback<span class="token punctuation">)</span>
        RX packets <span class="token number">7527</span>  bytes <span class="token number">369759</span> <span class="token punctuation">(</span><span class="token number">361.0</span> KiB<span class="token punctuation">)</span>
        RX errors <span class="token number">0</span>  dropped <span class="token number">0</span>  overruns <span class="token number">0</span>  frame <span class="token number">0</span>
        TX packets <span class="token number">7527</span>  bytes <span class="token number">369759</span> <span class="token punctuation">(</span><span class="token number">361.0</span> KiB<span class="token punctuation">)</span>
        TX errors <span class="token number">0</span>  dropped <span class="token number">0</span> overruns <span class="token number">0</span>  carrier <span class="token number">0</span>  collisions <span class="token number">0</span>

<span class="token comment"># æŸ¥çœ‹å„ä¸ªé“¾è·¯å±‚åè®® MTU å€¼</span>
<span class="token punctuation">[</span>root@ ~<span class="token punctuation">]</span><span class="token comment"># netstat -in</span>
Kernel Interface table
Iface             MTU    RX-OK RX-ERR RX-DRP RX-OVR    TX-OK TX-ERR TX-DRP TX-OVR Flg
docker0          <span class="token number">1500</span>      <span class="token number">624</span>      <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0</span>           <span class="token number">502</span>      <span class="token number">0</span>      <span class="token number">0</span>      <span class="token number">0</span> BMU
eth0             <span class="token number">1500</span>  <span class="token number">9750648</span>      <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0</span>       <span class="token number">9519116</span>      <span class="token number">0</span>      <span class="token number">0</span>      <span class="token number">0</span> BMRU
lo              <span class="token number">65536</span>     <span class="token number">7527</span>      <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0</span>          <span class="token number">7527</span>      <span class="token number">0</span>      <span class="token number">0</span>      <span class="token number">0</span> LRU
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br></div></div><h2 id="_03-ip-ç½‘é™…åè®®"><a href="#_03-ip-ç½‘é™…åè®®" class="header-anchor">#</a> 03 - IP ç½‘é™…åè®®</h2> <blockquote><p>ä¸å¯é  unreliable</p> <blockquote><p>ä¸ä¿è¯ IP æ•°æ®æŠ¥èƒ½æˆåŠŸåˆ°è¾¾ç›®çš„åœ°, ä»»åŠ¡çš„å¯é æ€§éœ€è¦ç”±ä¸Šå±‚æ¥æä¾›</p></blockquote></blockquote> <blockquote><p>æ— è¿æ¥ connectionless</p> <blockquote><p>IP å¹¶ä¸ç»´æŠ¤ä»»ä½•å…³äºåç»­æ•°æ®æŠ¥çš„çŠ¶æ€ä¿¡æ¯, æ¯ä¸ªæ•°æ®æŠ¥å¤„ç†ç›¸äº’ç‹¬ç«‹. å‘é€åˆ°è¾¾é¡ºåº, è·¯å¾„å‡å¯ä¸åŒ</p></blockquote></blockquote> <h3 id="ip-é¦–éƒ¨"><a href="#ip-é¦–éƒ¨" class="header-anchor">#</a> IP é¦–éƒ¨</h3> <p><strong>IP é¦–éƒ¨</strong> <img src="/image/note/tcpip-illustrated/03/ip_header_001.webp" alt="IP é¦–éƒ¨"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>é«˜ä½                                                        ä½ä½
 <span class="token number">0</span>                   <span class="token number">1</span>                   <span class="token number">2</span>                   <span class="token number">3</span>
 <span class="token number">0</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span> <span class="token number">6</span> <span class="token number">7</span> <span class="token number">8</span> <span class="token number">9</span> <span class="token number">0</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span> <span class="token number">6</span> <span class="token number">7</span> <span class="token number">8</span> <span class="token number">9</span> <span class="token number">0</span> <span class="token number">1</span> <span class="token number">2</span> <span class="token number">3</span> <span class="token number">4</span> <span class="token number">5</span> <span class="token number">6</span> <span class="token number">7</span> <span class="token number">8</span> <span class="token number">9</span> <span class="token number">0</span> <span class="token number">1</span>
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
<span class="token operator">|</span>Version<span class="token operator">|</span>  IHL  <span class="token operator">|</span>Type of Service<span class="token operator">|</span>          Total Length         <span class="token operator">|</span>
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
<span class="token operator">|</span>         Identification        <span class="token operator">|</span>Flags<span class="token operator">|</span>      Fragment Offset    <span class="token operator">|</span>
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
<span class="token operator">|</span>  Time to Live <span class="token operator">|</span>    Protocol   <span class="token operator">|</span>         Header Checksum       <span class="token operator">|</span>
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
<span class="token operator">|</span>                       Source Address                          <span class="token operator">|</span>
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
<span class="token operator">|</span>                    Destination Address                        <span class="token operator">|</span>
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+
<span class="token operator">|</span>                    Options                    <span class="token operator">|</span>    Padding    <span class="token operator">|</span>
+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+-+

Version ç‰ˆæœ¬
    ç›®å‰ä¸º <span class="token number">4</span>, å³ IPv4
IHL é¦–éƒ¨é•¿åº¦
TOS æœåŠ¡ç±»å‹
    3bit ä¼˜å…ˆæƒå­æ®µ + 4bit TOS å­æ®µ + 1bit <span class="token number">0</span>
    TOS å­æ®µ
        æœ€å°æ—¶å»¶
        æœ€å¤§ååé‡
        æœ€é«˜å¯é æ€§
        æœ€å°è´¹ç”¨
Total Length æ•´ä¸ª IP æ•°æ®æŠ¥é•¿åº¦
    <span class="token number">16</span> bit, æœ€å¤§é•¿åº¦ <span class="token operator">=</span> <span class="token number">2</span>^16 - <span class="token number">1</span> <span class="token operator">=</span> <span class="token number">65535</span> byte
Identification æ ‡è¯†å­—æ®µ
    å”¯ä¸€çš„æ ‡è¯†ä¸»æœºå‘é€çš„æ¯ä¸€ä»½æ•°æ®æŠ¥, é€šå¸¸æ¯æ¬¡ +1
TTL ç”Ÿå­˜æ—¶é—´
    æ•°æ®æŠ¥å¯ä»¥ç»è¿‡çš„æœ€å¤šè·¯ç”±å™¨æ•°, æ¯æ¬¡ -1, é˜²æ­¢ç”±äºè·¯ç”±ç¯è·¯å¯¼è‡´çš„ä¸åœè½¬å‘
    TTL ä¸º <span class="token number">0</span> æ—¶, æ•°æ®æŠ¥è¢«ä¸¢å¼ƒ, å¹¶å‘é€ ICMP æŠ¥æ–‡é€šçŸ¥æºä¸»æœº
Protocol
    æ ‡è¯†ä¸Šå±‚æ‰€ä½¿ç”¨çš„åè®®<span class="token punctuation">(</span>TCP UDP ç­‰<span class="token punctuation">)</span>
Header Checksum
    IP Header éƒ¨åˆ†çš„æ ¡éªŒå’Œ, ä¸åŒ…æ‹¬æ•°æ®éƒ¨åˆ†
Source Address / Destination Address
    é™¤éä½¿ç”¨ NAT, å¦åˆ™æ•´ä¸ªä¼ è¾“ä¸­, äºŒè€…ä¸å˜
Options
    ä»¥ 32bit ä¸ºç•Œé™, å¿…è¦æ—¶æ’å…¥ <span class="token number">0</span> å¡«å……, ä¿è¯ IP é¦–éƒ¨å§‹ç»ˆæ˜¯ 32bit çš„æ•´æ•°å€
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br></div></div><div class="language-bash line-numbers-mode"><pre class="language-bash"><code>big endian å­—èŠ‚åº
    ä¼ è¾“é¡ºåºä¸º <span class="token number">0</span>-7, <span class="token number">8</span>-15, <span class="token number">16</span>-23, <span class="token number">24</span>-31 bit
    TCP/IP é¦–éƒ¨ä¸­æ‰€æœ‰äºŒè¿›åˆ¶æ•´æ•°åœ¨ç½‘ç»œä¸­ä¼ è¾“éƒ½ä¸ºæ­¤æ¬¡åº
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="ip-è·¯ç”±é€‰æ‹©"><a href="#ip-è·¯ç”±é€‰æ‹©" class="header-anchor">#</a> IP è·¯ç”±é€‰æ‹©</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">1</span>. å¦‚æœç›®çš„ä¸»æœºä¸æºä¸»æœºç›´æ¥ç›¸è¿, æˆ–åœ¨ä¸€ä¸ªå…±äº«ç½‘ç»œä¸Š, IP æ•°æ®æŠ¥ç›´æ¥é€åˆ°ç›®çš„ä¸»æœºä¸Š.
<span class="token number">2</span>. ä¸ç›´æ¥ç›¸è¿æ—¶, ä¸»æœºæŠŠæ•°æ®æŠ¥å‘å¾€é»˜è®¤çš„è·¯ç”±å™¨ä¸Š, åˆè·¯ç”±å™¨è½¬å‘è¯¥æ•°æ®æŠ¥

IP å±‚æ—¢å¯ä»¥é…ç½®æˆè·¯ç”±å™¨åŠŸèƒ½, ä¹Ÿå¯ä»¥é…ç½®æˆä¸»æœºåŠŸèƒ½.
    ä¸»æœºä¸ä¼šæŠŠæ•°æ®æŠ¥ä»ä¸€ä¸ªæ¥å£è½¬å‘åˆ°å¦ä¸€ä¸ªæ¥å£, è·¯ç”±å™¨ä¼šè½¬å‘.
IP åœ¨å†…å­˜ä¸­æœ‰ä¸€ä¸ªè·¯ç”±è¡¨, å½“æ”¶åˆ°ä¸€ä»½æ•°æ®æŠ¥å¹¶è¿›è¡Œå‘é€æ—¶, éƒ½è¦å¯¹è¯¥è¡¨æœç´¢ä¸€æ¬¡.
    æ¥æ”¶åˆ°æŸä¸ªç½‘ç»œæ¥å£çš„æ•°æ®æŠ¥æ—¶, æ£€æŸ¥ç›®çš„ IP åœ°å€æ˜¯å¦ä¸ºæœ¬æœº IP åœ°å€æˆ– IP å¹¿æ’­åœ°å€, æ˜¯åˆ™ç”±
      å¯¹åº”åè®®æ¨¡å—å¤„ç†. ä¸æ˜¯åˆ™, IP å±‚è®¾ç½®ä¸ºè·¯ç”±å™¨åŠŸèƒ½å°±è½¬å‘, å¦åˆ™å°±ä¸¢å¼ƒæ•°æ®æŠ¥

è·¯ç”±è¡¨ä¿¡æ¯
    ç›®çš„ IP åœ°å€
    ä¸‹ä¸€ç«™è·¯ç”±å™¨ IP åœ°å€ / ç›´è¿ç½‘ç»œ IP åœ°å€
    æ ‡å¿—
        å…¶ä¸­ä¸€ä¸ªæ ‡å¿—è‡´å‘½ç›®çš„ IP åœ°å€æ˜¯ç½‘ç»œåœ°å€è¿˜æ˜¯ä¸»æœºåœ°å€
        å¦ä¸€ä¸ªæ ‡å¿—è‡´å‘½ä¸‹ä¸€ç«™è·¯ç”±å™¨æ˜¯å¦ä¸ºçœŸæ­£çš„ä¸‹ä¸€ç«™è·¯ç”±å™¨, è¿˜æ˜¯ç›´è¿æ¥å£
    ä¸ºæ•°æ®æŠ¥çš„ä¼ è¾“æŒ‡å®šä¸€ä¸ªç½‘ç»œæ¥å£

IP è·¯ç”±é€‰æ‹©
    é€šè¿‡é€è·³æ¥å®ç°
    æ•°æ®æŠ¥åœ¨å„ç«™çš„ä¼ è¾“è¿‡ç¨‹ä¸­ç›®çš„ IP åœ°å€å§‹ç»ˆä¸å˜, ä½†æ˜¯å°è£…å’Œç›®çš„é“¾è·¯å±‚åœ°å€æ¯ä¸€ç«™éƒ½å¯ä»¥æ”¹å˜.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="å­ç½‘"><a href="#å­ç½‘" class="header-anchor">#</a> å­ç½‘</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>A B ç±»åœ°å€ä¸€èˆ¬éƒ½è¦è¿›è¡Œå­ç½‘åˆ’åˆ†, ç”¨äºå­ç½‘å·çš„æ¯”ç‰¹æ•°é€šè¿‡å­ç½‘æ©ç æ¥æŒ‡å®š.

B ç±»åœ°å€å­ç½‘ç¼–å€
    ä¸€ç§åˆ’åˆ†: 16bit ç½‘ç»œå· + 8bit å­ç½‘å· + 8bit ä¸»æœºå·
å­ç½‘ç¼–å€å¯ä»¥ç¼©å° Internet è·¯ç”±è¡¨è§„æ¨¡.

å­ç½‘æ©ç 
    å€¼ä¸º <span class="token number">1</span> çš„æ¯”ç‰¹ç•™ç»™ç½‘ç»œå·å’Œå­ç½‘å·, ä¸º <span class="token number">0</span> çš„æ¯”ç‰¹ç•™ç»™ä¸»æœºå·
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="ç‰¹æ®Šæƒ…å†µ-ip"><a href="#ç‰¹æ®Šæƒ…å†µ-ip" class="header-anchor">#</a> ç‰¹æ®Šæƒ…å†µ IP</h3> <p><strong>ç‰¹æ®Š IPåœ°å€</strong><br> <img src="/image/note/tcpip-illustrated/03/special_ip_001.webp" alt="ç‰¹æ®Š IPåœ°å€"></p> <h3 id="å‘½ä»¤"><a href="#å‘½ä»¤" class="header-anchor">#</a> å‘½ä»¤</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@ ~<span class="token punctuation">]</span><span class="token comment"># ifconfig</span>
docker0: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">409</span><span class="token operator"><span class="token file-descriptor important">9</span>&lt;</span>UP,BROADCAST,MULTICAST<span class="token operator">&gt;</span>  mtu <span class="token number">1500</span>
        inet <span class="token number">172.18</span>.0.1  netmask <span class="token number">255.255</span>.0.0  broadcast <span class="token number">172.18</span>.255.255
        inet6 fe80::42:1eff:fe10:960f  prefixlen <span class="token number">64</span>  scopeid 0x2<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>link<span class="token operator">&gt;</span>
        ether 02:42:1e:10:96:0f  txqueuelen <span class="token number">0</span>  <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>
        RX packets <span class="token number">624</span>  bytes <span class="token number">106169</span> <span class="token punctuation">(</span><span class="token number">103.6</span> KiB<span class="token punctuation">)</span>
        RX errors <span class="token number">0</span>  dropped <span class="token number">0</span>  overruns <span class="token number">0</span>  frame <span class="token number">0</span>
        TX packets <span class="token number">502</span>  bytes <span class="token number">1028258</span> <span class="token punctuation">(</span><span class="token number">1004.1</span> KiB<span class="token punctuation">)</span>
        TX errors <span class="token number">0</span>  dropped <span class="token number">0</span> overruns <span class="token number">0</span>  carrier <span class="token number">0</span>  collisions <span class="token number">0</span>

eth0: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">416</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,BROADCAST,RUNNING,MULTICAST<span class="token operator">&gt;</span>  mtu <span class="token number">1500</span>
        inet <span class="token number">172.17</span>.0.2  netmask <span class="token number">255.255</span>.240.0  broadcast <span class="token number">172.17</span>.15.255
        inet6 fe80::5054:ff:fe1d:9861  prefixlen <span class="token number">64</span>  scopeid 0x2<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>link<span class="token operator">&gt;</span>
        ether <span class="token number">52</span>:54:00:1d:98:61  txqueuelen <span class="token number">1000</span>  <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>
        RX packets <span class="token number">9793138</span>  bytes <span class="token number">2358843500</span> <span class="token punctuation">(</span><span class="token number">2.1</span> GiB<span class="token punctuation">)</span>
        RX errors <span class="token number">0</span>  dropped <span class="token number">0</span>  overruns <span class="token number">0</span>  frame <span class="token number">0</span>
        TX packets <span class="token number">9564495</span>  bytes <span class="token number">1925846680</span> <span class="token punctuation">(</span><span class="token number">1.7</span> GiB<span class="token punctuation">)</span>
        TX errors <span class="token number">0</span>  dropped <span class="token number">0</span> overruns <span class="token number">0</span>  carrier <span class="token number">0</span>  collisions <span class="token number">0</span>

lo: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">7</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,LOOPBACK,RUNNING<span class="token operator">&gt;</span>  mtu <span class="token number">65536</span>
        inet <span class="token number">127.0</span>.0.1  netmask <span class="token number">255.0</span>.0.0
        inet6 ::1  prefixlen <span class="token number">128</span>  scopeid 0x1<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>host<span class="token operator">&gt;</span>
        loop  txqueuelen <span class="token number">1000</span>  <span class="token punctuation">(</span>Local Loopback<span class="token punctuation">)</span>
        RX packets <span class="token number">7566</span>  bytes <span class="token number">371672</span> <span class="token punctuation">(</span><span class="token number">362.9</span> KiB<span class="token punctuation">)</span>
        RX errors <span class="token number">0</span>  dropped <span class="token number">0</span>  overruns <span class="token number">0</span>  frame <span class="token number">0</span>
        TX packets <span class="token number">7566</span>  bytes <span class="token number">371672</span> <span class="token punctuation">(</span><span class="token number">362.9</span> KiB<span class="token punctuation">)</span>
        TX errors <span class="token number">0</span>  dropped <span class="token number">0</span> overruns <span class="token number">0</span>  carrier <span class="token number">0</span>  collisions <span class="token number">0</span>

<span class="token punctuation">[</span>root@ ~<span class="token punctuation">]</span><span class="token comment"># ifconfig eth0</span>
eth0: <span class="token assign-left variable">flags</span><span class="token operator">=</span><span class="token number">416</span><span class="token operator"><span class="token file-descriptor important">3</span>&lt;</span>UP,BROADCAST,RUNNING,MULTICAST<span class="token operator">&gt;</span>  mtu <span class="token number">1500</span>
        inet <span class="token number">172.17</span>.0.2  netmask <span class="token number">255.255</span>.240.0  broadcast <span class="token number">172.17</span>.15.255
        inet6 fe80::5054:ff:fe1d:9861  prefixlen <span class="token number">64</span>  scopeid 0x2<span class="token operator"><span class="token file-descriptor important">0</span>&lt;</span>link<span class="token operator">&gt;</span>
        ether <span class="token number">52</span>:54:00:1d:98:61  txqueuelen <span class="token number">1000</span>  <span class="token punctuation">(</span>Ethernet<span class="token punctuation">)</span>
        RX packets <span class="token number">9793152</span>  bytes <span class="token number">2358844444</span> <span class="token punctuation">(</span><span class="token number">2.1</span> GiB<span class="token punctuation">)</span>
        RX errors <span class="token number">0</span>  dropped <span class="token number">0</span>  overruns <span class="token number">0</span>  frame <span class="token number">0</span>
        TX packets <span class="token number">9564505</span>  bytes <span class="token number">1925848928</span> <span class="token punctuation">(</span><span class="token number">1.7</span> GiB<span class="token punctuation">)</span>
        TX errors <span class="token number">0</span>  dropped <span class="token number">0</span> overruns <span class="token number">0</span>  carrier <span class="token number">0</span>  collisions <span class="token number">0</span>

<span class="token punctuation">[</span>root@ ~<span class="token punctuation">]</span><span class="token comment"># netstat -in</span>
Kernel Interface table
Iface             MTU    RX-OK RX-ERR RX-DRP RX-OVR    TX-OK TX-ERR TX-DRP TX-OVR Flg
docker0          <span class="token number">1500</span>      <span class="token number">624</span>      <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0</span>           <span class="token number">502</span>      <span class="token number">0</span>      <span class="token number">0</span>      <span class="token number">0</span> BMU
eth0             <span class="token number">1500</span>  <span class="token number">9793168</span>      <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0</span>       <span class="token number">9564517</span>      <span class="token number">0</span>      <span class="token number">0</span>      <span class="token number">0</span> BMRU
lo              <span class="token number">65536</span>     <span class="token number">7566</span>      <span class="token number">0</span>      <span class="token number">0</span> <span class="token number">0</span>          <span class="token number">7566</span>      <span class="token number">0</span>      <span class="token number">0</span>      <span class="token number">0</span> LRU
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div><h3 id="faq"><a href="#faq" class="header-anchor">#</a> FAQ</h3> <ol><li>ç»™å®š IP åœ°å€å’Œå­ç½‘æ©ç , å¯ä»¥çŸ¥é“å“ªäº›ä¿¡æ¯?</li></ol> <blockquote><p>æœ¬æœº IP çš„ç±»å‹, å­ç½‘å·, ä¸»æœºå·</p></blockquote> <ol start="2"><li>ç¯å›åœ°å€å¿…é¡»æ˜¯ 127.0.0.1 å—?</li></ol> <blockquote><p>ä¸æ˜¯å¿…é¡». 127.0.0.0 - 127.255.255.255 å‡æ˜¯ç¯å›åœ°å€</p></blockquote> <h2 id="_04-arp-åœ°å€è§£æåè®®"><a href="#_04-arp-åœ°å€è§£æåè®®" class="header-anchor">#</a> 04 - ARP åœ°å€è§£æåè®®</h2> <blockquote><p>åœ°å€è§£æä¸ºä¸¤ç§ä¸åŒçš„åœ°å€å½¢å¼æä¾›æ˜ å°„: 32bit IP åœ°å€å’Œæ•°æ®é“¾è·¯å±‚ä½¿ç”¨çš„ä»»ä½•ç±»å‹åœ°å€</p> <blockquote><p>ARP åœ°å€è§£æåè®®: 32bit IP åœ°å€ -&gt; 48bit ä»¥å¤ªç½‘åœ°å€<br>
RARP é€†åœ°å€è§£æåè®®: 48bit ä»¥å¤ªç½‘åœ°å€ -&gt; 32bit IP åœ°å€</p></blockquote></blockquote> <h3 id="arp-åè®®"><a href="#arp-åè®®" class="header-anchor">#</a> ARP åè®®</h3> <ul><li><p>ARP</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>å½“ä¸€å°ä¸»æœºæŠŠä»¥å¤ªç½‘æ•°æ®å¸§å‘é€åˆ°ä½äºåŒä¸€å±€åŸŸç½‘çš„å¦ä¸€å°ä¸»æœºæ—¶, è®¾å¤‡é©±åŠ¨ç¨‹åºä¸æ£€æŸ¥ IP æ•°æ®æŠ¥
  ä¸­çš„ IP åœ°å€, è€Œæ˜¯æ ¹æ® 48bit çš„ä»¥å¤ªç½‘åœ°å€æ¥ç¡®å®šç›®çš„ä¸»æœºçš„.
ARP ä¸º IP åœ°å€åˆ°å¯¹åº”çš„ç¡¬ä»¶åœ°å€é—´æä¾›åŠ¨æ€æ˜ å°„.
ARP ç”¨äºè¿è¡Œ IPv4 çš„å¤šæ¥å…¥é“¾è·¯å±‚ç½‘ç»œ, åœ¨ç‚¹å¯¹ç‚¹é“¾è·¯ä¸­ä¸ä½¿ç”¨ ARP.
ARP æ˜¯ä¸€ä¸ªé€šç”¨åè®®, å¯ä»¥æ”¯æŒå¤šç§åœ°å€ä¹‹é—´çš„æ˜ å°„, å®é™…ä¸­æ€»æ˜¯ç”¨äº 32bit IPv4 åœ°å€å’Œ
  48bit MAC åœ°å€ä¹‹é—´çš„æ˜ å°„

æºä¸»æœºå‘é€æ•°æ®å‰éƒ½ä¼šæ£€æŸ¥è‡ªå·±çš„ ARP åˆ—è¡¨ä¸­æ˜¯å¦æœ‰è¯¥ IP å¯¹åº”çš„ MAC åœ°å€, æœ‰åˆ™ç›´æ¥å‘é€, æ²¡
  æœ‰åˆ™éœ€è¦æŸ¥è¯¢
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li><p>FTP ç¤ºä¾‹</p> <p><strong>FTP ARP æµç¨‹</strong><br> <img src="/image/note/tcpip-illustrated/04/arp_ftp_001.webp" alt="FTP ARP æµç¨‹"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token comment"># ftp louistian.xyz</span>

<span class="token number">1</span>. è°ƒç”¨ gethostbyname<span class="token punctuation">(</span><span class="token punctuation">)</span> å°†ä¸»æœºåè½¬æ¢ä¸º 32bit IP åœ°å€. è½¬æ¢è¿‡ç¨‹ä½¿ç”¨ DNS æˆ–è€…ä½¿ç”¨é™
    æ€æ³¨è®°æ–‡ä»¶ /etc/hosts
<span class="token number">2</span>. FTP å®¢æˆ·ç«¯è¯·æ±‚ TCP ä½¿ç”¨è·å–åˆ°çš„ IP åœ°å€å»ºç«‹è¿æ¥
<span class="token number">3</span>. TCP å‘é€ä¸€ä¸ªè¿æ¥è¯·æ±‚åˆ†æ®µåˆ°è¿œç¨‹ä¸»æœº, å³ä½¿ç”¨ä¸Šè¿° IP åœ°å€å‘é€ä¸€ä»½ IP æ•°æ®æŠ¥
<span class="token number">4</span>. å¦‚æœç›®çš„ä¸»æœºåœ¨æœ¬åœ°ç½‘ç»œä¸Š, é‚£ä¹ˆ IP æ•°æ®æŠ¥å¯ä»¥ç›´æ¥é€åˆ°ç›®çš„ä¸»æœºä¸Š. å¦‚æœç›®çš„ä¸»æœºåœ¨ä¸€ä¸ªè¿œç¨‹
    ç½‘ç»œä¸Š, é‚£ä¹ˆå°±é€šè¿‡ IP é€‰è·¯å‡½æ•°æ¥ç¡®å®šä½äºæœ¬åœ°ç½‘ç»œä¸Šçš„ä¸‹ä¸€ç«™è·¯ç”±å™¨åœ°å€, å¹¶è®©å…¶è½¬å‘ IP
    æ•°æ®æŠ¥. æ­¤æ—¶, IP æ•°æ®æŠ¥éƒ½æ˜¯è¢«é€åˆ°ä½äºæœ¬åœ°ç½‘ç»œä¸Šçš„ä¸€å°ä¸»æœºæˆ–è·¯ç”±å™¨
<span class="token number">5</span>. åœ¨ä»¥å¤ªç½‘ä¸­, ARP å‘é€ä¸€ä»½ ARP è¯·æ±‚ä»¥å¤ªç½‘æ•°æ®å¸§åˆ°ä»¥å¤ªç½‘ä¸Šçš„æ¯ä¸ªä¸»æœº, å³å¹¿æ’­. ARP è¯·æ±‚
    æ•°æ®å¸§ä¸­åŒ…å«ç›®çš„ä¸»æœº IP åœ°å€
<span class="token number">6</span>. ç›®çš„ä¸»æœº ARP å±‚æ”¶åˆ°å¹¿æ’­æŠ¥æ–‡å, è¯†åˆ«ä¸è‡ªå·±çš„ IP åœ°å€ä¸€è‡´, å‘é€ä¸€ä¸ª ARP åº”ç­”. åº”ç­”ä¸­
    åŒ…å« IP åœ°å€å’Œå¯¹åº”çš„ MAC åœ°å€
<span class="token number">7</span>. æ”¶åˆ° ARP åº”ç­”å, å¯ä»¥æ ¹æ® MAC åœ°å€å‘é€ IP æ•°æ®æŠ¥
<span class="token number">8</span>. IP æ•°æ®æŠ¥å‘é€åˆ°ç›®çš„ä¸»æœº
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div></li> <li><p>ARP ä»£ç†</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>å½“å‘é€ä¸»æœºå’Œæ¥æ”¶ä¸»æœºä¸åœ¨åŒä¸€ä¸ªå±€åŸŸç½‘ä¸­æ—¶, å³ä½¿çŸ¥é“ç›®çš„ä¸»æœº MAC åœ°å€, ä¸¤è€…ä¹Ÿä¸èƒ½ç›¸äº’é€šä¿¡,
  å¿…é¡»ç»è¿‡è·¯ç”±å™¨è½¬å‘æ‰å¯ä»¥. æ­¤æ—¶å‘é€ä¸»æœºé€šè¿‡ ARP åè®®è·å–çš„ä¸æ˜¯ç›®çš„ä¸»æœºçš„çœŸå® MAC åœ°å€,
  è€Œæ˜¯ä¸€å°å¯ä»¥é€šå¾€å±€åŸŸç½‘å¤–çš„è·¯ç”±å™¨çš„ MAC åœ°å€, æ­¤åå‘é€ä¸»æœºå‘å¾€ç›®çš„ä¸»æœºçš„æ‰€æœ‰å¸§, éƒ½å°†å‘
  å¾€è¯¥è·¯ç”±å™¨, ç”±å…¶è¿›è¡Œå‘å¤–å‘é€.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ul> <h3 id="arp-é«˜é€Ÿç¼“å­˜"><a href="#arp-é«˜é€Ÿç¼“å­˜" class="header-anchor">#</a> ARP é«˜é€Ÿç¼“å­˜</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>æ¯ä¸ªä¸»æœºä¸Šéƒ½æœ‰ ARP é«˜é€Ÿç¼“å­˜, ç¼“å­˜æœ‰æ•ˆæ—¶é—´ 20min

<span class="token punctuation">[</span>louis@louis ~<span class="token punctuation">]</span>$ arp -a
_gateway <span class="token punctuation">(</span><span class="token number">192.168</span>.6.2<span class="token punctuation">)</span> at 00:50:56:eb:f3:c0 <span class="token punctuation">[</span>ether<span class="token punctuation">]</span> on ens160
? <span class="token punctuation">(</span><span class="token number">192.168</span>.6.1<span class="token punctuation">)</span> at 00:50:56:c0:00:08 <span class="token punctuation">[</span>ether<span class="token punctuation">]</span> on ens160
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="arp-åˆ†ç»„æ ¼å¼"><a href="#arp-åˆ†ç»„æ ¼å¼" class="header-anchor">#</a> ARP åˆ†ç»„æ ¼å¼</h3> <p><strong>ARP åˆ†ç»„æ ¼å¼</strong><br> <img src="/image/note/tcpip-illustrated/04/arp_format_001.webp" alt="ARP åˆ†ç»„æ ¼å¼"></p> <ul><li><p>PING ç¤ºä¾‹</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">1</span>. CMD ç®¡ç†å‘˜è¿è¡Œ, arp -d æ¸…é™¤æ‰€æœ‰é«˜é€Ÿç¼“å­˜
<span class="token number">2</span>. <span class="token function">ping</span> <span class="token number">192.168</span>.2.106
<span class="token number">3</span>. arp -a æŸ¥çœ‹é«˜é€Ÿç¼“å­˜
    C:<span class="token punctuation">\</span>Windows<span class="token punctuation">\</span>system3<span class="token operator"><span class="token file-descriptor important">2</span>&gt;</span>arp -a
    Interface: <span class="token number">192.168</span>.2.104 --- 0xd
    Internet Address      Physical Address      Type
    <span class="token number">192.168</span>.2.1           <span class="token number">30</span>-fc-68-b4-2f-25     dynamic
    <span class="token number">192.168</span>.2.106         <span class="token number">94</span>-0c-98-6a-2a-97     dynamic
    <span class="token number">192.168</span>.2.255         ff-ff-ff-ff-ff-ff     static
    <span class="token number">224.0</span>.0.2             01-00-5e-00-00-02     static
    <span class="token number">224.0</span>.0.22            01-00-5e-00-00-16     static
    <span class="token number">224.0</span>.0.251           01-00-5e-00-00-fb     static
    <span class="token number">224.0</span>.0.252           01-00-5e-00-00-fc     static
    <span class="token number">239.255</span>.255.250       01-00-5e-7f-ff-fa     static
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>ARP å¹¿æ’­è¯·æ±‚
<img src="/image/note/tcpip-illustrated/04/arp_broadcast_001.webp" alt="ARP å¹¿æ’­è¯·æ±‚"></li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>ä»¥å¤ªç½‘å¸§å¤´éƒ¨åˆ†
<span class="token number">0</span>-15bit <span class="token builtin class-name">:</span> ä»¥å¤ªç½‘å¸§å¤´ç›®çš„åœ°å€, ff:ff:ff:ff:ff:ff å¹¿æ’­
<span class="token number">16</span>-31bit <span class="token builtin class-name">:</span> ä»¥å¤ªç½‘å¸§å¤´æºåœ°å€, <span class="token number">34</span>:13:e8:5e:41:51
<span class="token number">32</span>-39bit <span class="token builtin class-name">:</span> å¸§ç±»å‹, 0806 è¡¨ç¤º ARP åè®®

ARP æ•°æ®éƒ¨åˆ†
<span class="token number">0</span>-15bit <span class="token builtin class-name">:</span> ç¡¬ä»¶ç±»å‹, 0001 ä»¥å¤ªç½‘
<span class="token number">16</span>-31bit <span class="token builtin class-name">:</span> åè®®ç±»å‹, 0800 IPv4 åè®®
<span class="token number">32</span>-39bit <span class="token builtin class-name">:</span> MAC åœ°å€é•¿åº¦, 06 6byte
<span class="token number">40</span>-47bit <span class="token builtin class-name">:</span> åè®®åœ°å€é•¿åº¦, 05 4byte
<span class="token number">48</span>-63bit <span class="token builtin class-name">:</span> æ“ä½œç , 0001 ARP è¯·æ±‚
<span class="token number">64</span>-111bit <span class="token builtin class-name">:</span> å‘é€æ–¹ MAC åœ°å€, <span class="token number">34</span>:13:e8:5e:41:51
<span class="token number">112</span>-143bit <span class="token builtin class-name">:</span> å‘é€æ–¹ IP åè®®åœ°å€, c0 a8 02 <span class="token number">68</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">192.168</span>.2.106
<span class="token number">144</span>-191bit <span class="token builtin class-name">:</span> æ¥æ”¶æ–¹ MAC åœ°å€, ä¸€èˆ¬å…¨ <span class="token number">0</span>
<span class="token number">192</span>-123bit <span class="token builtin class-name">:</span> æ¥æ”¶æ–¹ IP åè®®åœ°å€<span class="token punctuation">(</span>éœ€å¯¹åº”åè®®ç±»å‹<span class="token punctuation">)</span>, c0 a8 02 6a <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">192.168</span>.2.106
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><ul><li>ARP å¹¿æ’­å“åº”
<img src="/image/note/tcpip-illustrated/04/arp_broadcast_002.webp" alt="ARP å¹¿æ’­å“åº”"></li></ul> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>ä»¥å¤ªç½‘å¸§å¤´éƒ¨åˆ†

ARP æ•°æ®éƒ¨åˆ†
<span class="token number">48</span>-63bit <span class="token builtin class-name">:</span> æ“ä½œç , 0002 ARP å“åº”
<span class="token number">64</span>-111bit <span class="token builtin class-name">:</span> å‘é€æ–¹ MAC åœ°å€, <span class="token number">94</span>:0c:98:6a:2a:97
<span class="token number">112</span>-143bit <span class="token builtin class-name">:</span> å‘é€æ–¹ IP åè®®åœ°å€, c0 a8 02 6a <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">192.168</span>.2.106
<span class="token number">144</span>-191bit <span class="token builtin class-name">:</span> æ¥æ”¶æ–¹ MAC åœ°å€, <span class="token number">34</span>:13:e8:5e:41:51
<span class="token number">192</span>-123bit <span class="token builtin class-name">:</span> æ¥æ”¶æ–¹ IP åè®®åœ°å€<span class="token punctuation">(</span>éœ€å¯¹åº”åè®®ç±»å‹<span class="token punctuation">)</span>, c0 a8 02 <span class="token number">68</span> <span class="token operator">=</span><span class="token operator">&gt;</span> <span class="token number">192.168</span>.2.106
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></li></ul> <h2 id="_05-rarp-é€†åœ°å€è§£æåè®®"><a href="#_05-rarp-é€†åœ°å€è§£æåè®®" class="header-anchor">#</a> 05 - RARP é€†åœ°å€è§£æåè®®</h2> <blockquote><p>å…·æœ‰æœ¬åœ°ç£ç›˜çš„ç³»ç»Ÿå¼•å¯¼æ—¶, ä¸€èˆ¬ä»ç£ç›˜ä¸Šçš„é…ç½®æ–‡ä»¶ä¸­è¯»å– IP åœ°å€. æ— ç›˜ç³»ç»Ÿçš„ RARP å®ç°è¿‡ç¨‹
æ˜¯ä»æ¥å£å¡ä¸Šè¯»å–å”¯ä¸€çš„ç¡¬ä»¶åœ°å€, ç„¶åå‘é€ä¸€ä»½ RARP è¯·æ±‚å¹¿æ’­, è¯·æ±‚æŸä¸ªä¸»æœºå“åº”è¯¥æ— ç›˜ç³»ç»Ÿçš„
IP åœ°å€.</p></blockquote> <h3 id="rarp-åè®®"><a href="#rarp-åè®®" class="header-anchor">#</a> RARP åè®®</h3> <p><strong>RARP åˆ†ç»„æ ¼å¼</strong><br> <img src="/image/note/tcpip-illustrated/05/rarp_format_001.webp" alt="RARP åˆ†ç»„æ ¼å¼"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>ä»¥å¤ªç½‘å¸§ç±»å‹ä»£ç  0x8035
è¯·æ±‚æ“ä½œä»£ç  <span class="token number">3</span>
åº”ç­”æ“ä½œä»£ç  <span class="token number">4</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="rarp-å‘é€ä¸æ¥æ”¶"><a href="#rarp-å‘é€ä¸æ¥æ”¶" class="header-anchor">#</a> RARP å‘é€ä¸æ¥æ”¶</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>RARP è¯·æ±‚åœ¨ç½‘ç»œä¸Šè¿›è¡Œå¹¿æ’­, åœ¨åˆ†ç»„ä¸­æ ‡æ˜å‘é€ç«¯çš„ç¡¬ä»¶åœ°å€, ä»¥è¯·æ±‚ç›¸åº” IP åœ°å€çš„å“åº”. åº”ç­”é€šå¸¸
  æ˜¯å•æ’­ä¼ é€çš„.

ARP æœåŠ¡å™¨é€šå¸¸æ˜¯ TCP/IP åœ¨å†…æ ¸ä¸­å®ç°.
RARP æœåŠ¡å™¨åŠŸèƒ½ä¸€èˆ¬ç”±ç”¨æˆ·è¿›ç¨‹æä¾›.
æ¯ä¸ªç½‘ç»œä¸­æœ‰å¤šä¸ª RARP æœåŠ¡å™¨, æ¯ä¸ªæœåŠ¡å™¨å¯¹æ¯ä¸ª RARP è¯·æ±‚éƒ½è¦å‘é€åº”ç­”. å‘é€è¯·æ±‚çš„æ— ç›˜ç³»ç»Ÿä¸€
  èˆ¬é‡‡ç”¨æœ€å…ˆæ”¶åˆ°çš„ RARP åº”ç­”.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><h2 id="_06-icmp-internet-æ§åˆ¶æŠ¥æ–‡åè®®"><a href="#_06-icmp-internet-æ§åˆ¶æŠ¥æ–‡åè®®" class="header-anchor">#</a> 06 - ICMP Internet æ§åˆ¶æŠ¥æ–‡åè®®</h2> <blockquote><p>IP å±‚çš„ä¸€éƒ¨åˆ†, ä¸»è¦ä¼ é€’å·®é”™æŠ¥æ–‡åŠå…¶ä»–éœ€è¦æ³¨æ„çš„ä¿¡æ¯.<br>
ICMP é€šå¸¸è¢« IP å±‚æˆ–æ›´é«˜å±‚åè®®ä½¿ç”¨.</p> <blockquote><p>ç¡®è®¤ IP åŒ…æ˜¯å¦æˆåŠŸåˆ°è¾¾ç›®çš„åœ°å€
é€šçŸ¥åœ¨å‘é€è¿‡ç¨‹ä¸­ IP åŒ…è¢«ä¸¢å¼ƒçš„åŸå› </p></blockquote></blockquote> <h3 id="icmp-æ§åˆ¶æŠ¥æ–‡åè®®"><a href="#icmp-æ§åˆ¶æŠ¥æ–‡åè®®" class="header-anchor">#</a> ICMP æ§åˆ¶æŠ¥æ–‡åè®®</h3> <p><strong>ICMP æŠ¥æ–‡å°è£…</strong><br> <img src="/image/note/tcpip-illustrated/06/icmp_001.webp" alt="ICMP æŠ¥æ–‡å°è£…"></p> <p><strong>ICMP æŠ¥æ–‡</strong><br> <img src="/image/note/tcpip-illustrated/06/icmp_002.webp" alt="ICMP æŠ¥æ–‡"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">0</span>-7bit <span class="token builtin class-name">:</span> ICMP æŠ¥æ–‡ç±»å‹, <span class="token number">1</span>-127 ä¸ºå·®é”™æŠ¥æ–‡, <span class="token operator">&gt;</span><span class="token operator">=</span><span class="token number">128</span> ä¸ºä¿¡æ¯æŠ¥æ–‡
<span class="token number">8</span>-15bit <span class="token builtin class-name">:</span> ICMP æŠ¥æ–‡ä»£ç , ä¸ç±»å‹å­—æ®µä¸€èµ·æ ‡è¯† ICMP æŠ¥æ–‡è¯¦ç»†ç±»å‹
<span class="token number">16</span>-31bit <span class="token builtin class-name">:</span> æ ¡éªŒå’Œ
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p><strong>ICMP æ¶ˆæ¯ç±»å‹</strong><br> <img src="/image/note/tcpip-illustrated/06/icmp_003.webp" alt="ICMP æ¶ˆæ¯ç±»å‹"></p> <ul><li><p>å¸¸è§ ICMP æŠ¥æ–‡</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>è¯·æ±‚å›æ˜¾
    <span class="token function">ping</span> æ“ä½œåŒ…æ‹¬è¯·æ±‚å›æ˜¾<span class="token punctuation">(</span>ç±»å‹ <span class="token number">8</span><span class="token punctuation">)</span>å’Œåº”ç­”<span class="token punctuation">(</span>ç±»å‹ <span class="token number">0</span><span class="token punctuation">)</span> ICMP æŠ¥æ–‡
ç›®æ ‡ä¸å¯è¾¾ <span class="token punctuation">(</span>ç±»å‹ <span class="token number">3</span><span class="token punctuation">)</span>
    è·¯ç”±å™¨æˆ–ä¸»æœºä¸èƒ½ä¼ é€’æ•°æ®æ—¶ä½¿ç”¨. å¦‚è¿æ¥å¯¹æ–¹ä¸å­˜åœ¨çš„ç³»ç»Ÿç«¯å£
        ç½‘ç»œä¸å¯è¾¾ <span class="token punctuation">(</span>ç±»å‹ <span class="token number">3</span>, ä»£ç  <span class="token number">0</span><span class="token punctuation">)</span>
        ä¸»æœºä¸å¯è¾¾ <span class="token punctuation">(</span>ç±»å‹ <span class="token number">3</span>, ä»£ç  <span class="token number">1</span><span class="token punctuation">)</span>
        åè®®ä¸å¯è¾¾ <span class="token punctuation">(</span>ç±»å‹ <span class="token number">3</span>, ä»£ç  <span class="token number">2</span><span class="token punctuation">)</span>
        ç«¯å£ä¸å¯è¾¾ <span class="token punctuation">(</span>ç±»å‹ <span class="token number">3</span>, ä»£ç  <span class="token number">3</span><span class="token punctuation">)</span>
æºæŠ‘åˆ¶æŠ¥æ–‡ <span class="token punctuation">(</span>ç±»å‹ <span class="token number">4</span>, ä»£ç  <span class="token number">0</span><span class="token punctuation">)</span>
    æ§åˆ¶æµé‡, é€šçŸ¥ä¸»æœºå‡å°‘æ•°æ®æŠ¥æµé‡. åœæ­¢åˆ™ä¸»æœºæ¢å¤ä¼ è¾“é€Ÿç‡
è¶…æ—¶æŠ¥æ–‡ <span class="token punctuation">(</span>ç±»å‹ <span class="token number">11</span><span class="token punctuation">)</span>
    æ— è¿æ¥ç½‘ç»œä¼ è¾“å‡ºç°é—®é¢˜, è§¦å‘ ICMP è¶…æ—¶æŠ¥æ–‡
        ä¼ è¾“è¶…æ—¶ <span class="token punctuation">(</span>ä»£ç  <span class="token number">0</span><span class="token punctuation">)</span>
        åˆ†æ®µé‡ç»„è¶…æ—¶ <span class="token punctuation">(</span>ä»£ç  <span class="token number">1</span><span class="token punctuation">)</span>
æ—¶é—´æˆ³è¯·æ±‚
    æµ‹è¯•ä¸¤å°ä¸»æœºé—´æ•°æ®æŠ¥æ¥å›ä¸€æ¬¡ä¼ è¾“çš„æ—¶é—´
        è¯·æ±‚æŠ¥æ–‡ <span class="token punctuation">(</span>ç±»å‹ <span class="token number">13</span><span class="token punctuation">)</span>
        åº”ç­”æŠ¥æ–‡ <span class="token punctuation">(</span>ç±»å‹ <span class="token number">14</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><ul><li><p>ä¸äº§ç”Ÿ ICMP å·®é”™æŠ¥æ–‡çš„æƒ…å†µ</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>1. ICMP å·®é”™æŠ¥æ–‡
2. ç›®çš„åœ°å€æ˜¯å¹¿æ’­åœ°å€æˆ–å¤šæ’­åœ°å€çš„ IP æ•°æ®æŠ¥
3. ä½œä¸ºé“¾è·¯å±‚å¹¿æ’­çš„æ•°æ®æŠ¥
4. ä¸æ˜¯ IP åˆ†ç‰‡çš„ç¬¬ä¸€ç‰‡
5. æºåœ°å€ä¸æ˜¯å•ä¸ªä¸»æœºçš„æ•°æ®æŠ¥ (é›¶åœ°å€, ç¯å›åœ°å€, å¹¿æ’­åœ°å€, å¤šæ’­åœ°å€)
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ul></li> <li><p>ICMP ä¸ IP</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>ICMP å†…å®¹æ”¾åœ¨ IP æ•°æ®åŒ…çš„æ•°æ®éƒ¨åˆ†æ¥å‘é€çš„, ä½†æ˜¯ICMP ä¸»è¦æ˜¯è¾…åŠ© IP çš„ä¸€éƒ¨åˆ†åŠŸèƒ½, æ‰€ä»¥
  äºŒè€…æ˜¯åŒå±‚çš„åè®®
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></li></ul> <h3 id="ping"><a href="#ping" class="header-anchor">#</a> Ping</h3> <p><strong>Ping Request</strong><br> <img src="/image/note/tcpip-illustrated/06/icmp_ping_001.webp" alt="Ping Request"></p> <p><strong>Ping Response</strong><br> <img src="/image/note/tcpip-illustrated/06/icmp_ping_002.webp" alt="Ping Response"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">ping</span> åŠŸèƒ½
    éªŒè¯ç½‘ç»œè¿é€šæ€§
    ç»Ÿè®¡å“åº”æ—¶é—´å’Œ TTL
<span class="token function">ping</span> æ˜¯åœ¨ç½‘ç»œå±‚, æ²¡æœ‰ç«¯å£çš„æ¦‚å¿µ
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="icmp-ç›¸å…³åº”ç”¨"><a href="#icmp-ç›¸å…³åº”ç”¨" class="header-anchor">#</a> ICMP ç›¸å…³åº”ç”¨</h3> <p><strong>ICMP è·¯å¾„ MTU æ¢ç´¢</strong><br> <img src="/image/note/tcpip-illustrated/06/icmp_004.webp" alt="ICMP è·¯å¾„ MTU æ¢ç´¢"></p> <p><strong>ICMP æ”¹å˜è·¯ç”±</strong><br> <img src="/image/note/tcpip-illustrated/06/icmp_005.webp" alt="ICMP æ”¹å˜è·¯ç”±"></p> <p><strong>ICMP æºç‚¹æŠ‘åˆ¶</strong><br> <img src="/image/note/tcpip-illustrated/06/icmp_006.webp" alt="ICMP æºç‚¹æŠ‘åˆ¶"></p> <p><strong>ICMP Ping</strong><br> <img src="/image/note/tcpip-illustrated/06/icmp_007.webp" alt="ICMP Ping"></p> <p><strong>ICMP traceroute</strong><br> <img src="/image/note/tcpip-illustrated/06/icmp_008.webp" alt="ICMP traceroute"></p> <p><strong>ICMP ç«¯å£æ‰«æ</strong><br> <img src="/image/note/tcpip-illustrated/06/icmp_009.webp" alt="ICMP ç«¯å£æ‰«æ"></p> <blockquote><p>åªé’ˆå¯¹ UDP, TCP å¯ä»¥é€šè¿‡å»ºç«‹è¿æ¥æ¥åˆ¤æ–­.<br>
æ³¨æ„å³ä½¿ ICMP ç«¯å£ä¸å¯è¾¾æŠ¥æ–‡æ²¡æœ‰è¿”å›, ä¹Ÿä¸èƒ½æ–­å®šç«¯å£ä¸€å®šå°±å¼€ç€.</p></blockquote> <h2 id="_07-ping-ç¨‹åº"><a href="#_07-ping-ç¨‹åº" class="header-anchor">#</a> 07 - Ping ç¨‹åº</h2> <h3 id="ping-2"><a href="#ping-2" class="header-anchor">#</a> Ping</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token function">ping</span> ç¨‹åºæ˜¯å¯¹ä¸¤ä¸ª TCP/IP ç³»ç»Ÿè¿æ¥æ€§è¿›è¡Œæµ‹è¯•çš„åŸºæœ¬å·¥å…·. åªåˆ©ç”¨ ICMP å›æ˜¾è¯·æ±‚å’Œå›æ˜¾åº”ç­”æŠ¥æ–‡,
  ä¸ç”¨ç»è¿‡ä¼ è¾“å±‚.
<span class="token function">ping</span> æœåŠ¡å™¨ä¸€èˆ¬åœ¨å†…æ ¸ä¸­å®ç° ICMP åŠŸèƒ½.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="lan-ping-ç¤ºä¾‹"><a href="#lan-ping-ç¤ºä¾‹" class="header-anchor">#</a> LAN Ping ç¤ºä¾‹</h3> <p><strong>Ping ARP è¯·æ±‚</strong><br> <img src="/image/note/tcpip-illustrated/07/lan_ping_arp_001.webp" alt="Ping ARP è¯·æ±‚"></p> <p><strong>Ping ARP å›å¤</strong><br> <img src="/image/note/tcpip-illustrated/07/lan_ping_arp_002.webp" alt="Ping ARP å›å¤"></p> <p><strong>Ping ICMP è¯·æ±‚</strong><br> <img src="/image/note/tcpip-illustrated/07/lan_ping_icmp_001.webp" alt="Ping ICMP è¯·æ±‚"></p> <p><strong>Ping ICMP å›å¤</strong><br> <img src="/image/note/tcpip-illustrated/07/lan_ping_icmp_002.webp" alt="Ping ICMP å›å¤"></p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token number">1</span>. æºä¸»æœºå‘èµ· Ping è¯·æ±‚æ—¶, ä¼šé¦–å…ˆæŸ¥è¯¢è‡ªå·±çš„ MAC åœ°å€è¡¨<span class="token punctuation">(</span>ARP é«˜é€Ÿç¼“å†²<span class="token punctuation">)</span>, å¦‚æœæ²¡æœ‰, å°±éœ€è¦å‘
     é€ARP å¹¿æ’­åŒ…. äº¤æ¢æœºæ¥æ”¶åˆ° ARP æŠ¥æ–‡å, ä¼šæ£€ç´¢è‡ªå·±çš„ MAC åœ°å€è¡¨, æœ‰åˆ™è¿”å›, æ²¡æœ‰åˆ™å‘æ‰€
     æœ‰ä¸»æœºå‘é€ ARP å¹¿æ’­, å…¶ä»–ä¸»æœºæ”¶åˆ°å, éç›®çš„ä¸»æœºä¸¢å¼ƒè¯¥æŠ¥æ–‡, ç›®çš„ä¸»æœºå“åº”è¯¥æŠ¥æ–‡, åŒæ—¶ç¼“
     å­˜æºä¸»æœº MAC åœ°å€.
<span class="token number">2</span>. æºä¸»æœºæ”¶åˆ°ç›®çš„ä¸»æœºå“åº”å, æ ¹æ®å…¶ MAC åœ°å€, å°è£… ICMP åè®®è¯·æ±‚æŠ¥æ–‡å¹¶å‘é€
<span class="token number">3</span>. ç›®çš„ä¸»æœºæ”¶åˆ° ICMP å›æ˜¾è¯·æ±‚, æ‰§è¡Œå“åº”
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="wan-ping"><a href="#wan-ping" class="header-anchor">#</a> WAN Ping</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>å½“æºä¸»æœºä¸ç›®çš„ä¸»æœºä¸åœ¨åŒä¸€ç½‘æ®µæ—¶, ä¼šç”±ç½‘å…³è½¬å‘.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h2 id="_08-traceroute-ç¨‹åº"><a href="#_08-traceroute-ç¨‹åº" class="header-anchor">#</a> 08 - Traceroute ç¨‹åº</h2> <blockquote><p>Traceroute ç¨‹åºå¯ä»¥è®©æˆ‘ä»¬çœ‹åˆ° IP æ•°æ®æŠ¥ä»ä¸€å°ä¸»æœºä¼ åˆ°å¦ä¸€å°ä¸»æœºæ‰€ç»è¿‡çš„è·¯ç”±.</p></blockquote> <h3 id="traceroute"><a href="#traceroute" class="header-anchor">#</a> Traceroute</h3> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>ç¨‹åºä½¿ç”¨ ICMP æŠ¥æ–‡å’Œ IP é¦–éƒ¨ä¸­çš„ TTL å­—æ®µ.
    TTL å­—æ®µæ˜¯ç”±å‘é€ç«¯åˆå§‹è®¾ç½®ä¸€ä¸ª 8bit å­—æ®µ.
    æ¯ä¸ªå¤„ç†æ•°æ®æŠ¥çš„è·¯ç”±å™¨éƒ½éœ€è¦æŠŠ TTL å­—æ®µçš„å€¼å‡ <span class="token number">1</span>, æˆ–æ•°æ®æŠ¥åœ¨è·¯ç”±å™¨ä¸Šåœç•™çš„ç§’æ•°.
    å½“è·¯ç”±å™¨æ”¶åˆ°ä¸€ä»½ IP æ•°æ®æŠ¥, å¦‚æœå…¶ TTL å­—æ®µæ˜¯ <span class="token number">0</span> æˆ– <span class="token number">1</span>, åˆ™è·¯ç”±å™¨ä¸è½¬å‘è¯¥æ•°æ®æŠ¥, è·¯ç”±å™¨
      å°†è¯¥æ•°æ®æŠ¥ä¸¢å¼ƒ, å¹¶ç»™ä¿¡å·æºæœºå‘ä¸€ä»½ ICMP <span class="token string">&quot;è¶…æ—¶&quot;</span> ä¿¡æ¯.
    <span class="token function">traceroute</span> ç¨‹åºè·å–è¯¥ ICMP ä¿¡æ¯çš„ IP æŠ¥æ–‡çš„ä¿¡æºåœ°å€å³è¯¥è·¯ç”±å™¨çš„ IP åœ°å€.
    <span class="token function">traceroute</span> ç¨‹åºå‘é€ç»™ç›®çš„ä¸»æœºçš„ UDP æ•°æ®æŠ¥, ä¸€èˆ¬éƒ½é€‰æ‹©ä¸€ä¸ªä¸å¯èƒ½çš„å€¼ä½œä¸º UDP çš„ç«¯å£,
      å½“ UDP æ•°æ®æŠ¥åˆ°è¾¾ç›®çš„ä¸»æœºæ—¶, ä½¿ç›®çš„ä¸»æœºäº§ç”Ÿä¸€ä¸ª <span class="token string">&quot;ç«¯å£ä¸å¯è¾¾&quot;</span> ICMP æŠ¥æ–‡.
    <span class="token function">traceroute</span> æ ¹å‰§åŒºåˆ†æ¥æ”¶åˆ°çš„ ICMP æŠ¥æ–‡æ˜¯è¶…æ—¶è¿˜æ˜¯ç«¯å£ä¸å¯è¾¾, å³å¯åˆ¤æ–­ä½•æ—¶ç»“æŸ.
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>Traceroute æµç¨‹</strong><br> <img src="/image/note/tcpip-illustrated/08/traceroute_001.webp" alt="Traceroute æµç¨‹"></p> <p><strong>Traceroute TTL 1</strong><br> <img src="/image/note/tcpip-illustrated/08/traceroute_002.webp" alt="Traceroute TTL 1"></p> <p><strong>Traceroute TTL 2</strong><br> <img src="/image/note/tcpip-illustrated/08/traceroute_003.webp" alt="Traceroute TTL 2"></p> <p><strong>Traceroute ICMP è¶…æ—¶</strong><br> <img src="/image/note/tcpip-illustrated/08/traceroute_004.webp" alt="Traceroute ICMP è¶…æ—¶"></p> <p><strong>Traceroute ICMP ç«¯å£ä¸å¯è¾¾</strong><br> <img src="/image/note/tcpip-illustrated/08/traceroute_005.webp" alt="Traceroute ç«¯å£ä¸å¯è¾¾"></p> <ul><li><p>æŒ‡ä»¤</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code><span class="token punctuation">[</span>root@ ~<span class="token punctuation">]</span><span class="token comment"># traceroute 1.1.1.1</span>
<span class="token function">traceroute</span> to <span class="token number">1.1</span>.1.1 <span class="token punctuation">(</span><span class="token number">1.1</span>.1.1<span class="token punctuation">)</span>, <span class="token number">30</span> hops max, <span class="token number">60</span> byte packets
<span class="token number">1</span>  * * *
<span class="token number">2</span>  <span class="token number">100.104</span>.251.210 <span class="token punctuation">(</span><span class="token number">100.104</span>.251.210<span class="token punctuation">)</span>  <span class="token number">0.653</span> ms *  <span class="token number">0.835</span> ms
<span class="token number">3</span>  * * *
<span class="token number">4</span>  <span class="token number">101.227</span>.217.33 <span class="token punctuation">(</span><span class="token number">101.227</span>.217.33<span class="token punctuation">)</span>  <span class="token number">1.983</span> ms <span class="token number">10.196</span>.4.217 <span class="token punctuation">(</span><span class="token number">10.196</span>.4.217<span class="token punctuation">)</span>  <span class="token number">1.700</span> ms <span class="token number">10.196</span>.4.213 <span class="token punctuation">(</span><span class="token number">10.196</span>.4.213<span class="token punctuation">)</span>  <span class="token number">2.214</span> ms
<span class="token number">5</span>  <span class="token number">182.254</span>.127.120 <span class="token punctuation">(</span><span class="token number">182.254</span>.127.120<span class="token punctuation">)</span>  <span class="token number">1.877</span> ms  <span class="token number">1.935</span> ms <span class="token number">182.254</span>.127.119 <span class="token punctuation">(</span><span class="token number">182.254</span>.127.119<span class="token punctuation">)</span>  <span class="token number">1.979</span> ms
<span class="token number">6</span>  * <span class="token number">101.227</span>.217.37 <span class="token punctuation">(</span><span class="token number">101.227</span>.217.37<span class="token punctuation">)</span>  <span class="token number">1.267</span> ms *
<span class="token number">7</span>  <span class="token number">101.89</span>.240.37 <span class="token punctuation">(</span><span class="token number">101.89</span>.240.37<span class="token punctuation">)</span>  <span class="token number">2.740</span> ms <span class="token number">101.89</span>.240.57 <span class="token punctuation">(</span><span class="token number">101.89</span>.240.57<span class="token punctuation">)</span>  <span class="token number">1.665</span> ms <span class="token number">101.95</span>.120.178 <span class="token punctuation">(</span><span class="token number">101.95</span>.120.178<span class="token punctuation">)</span>  <span class="token number">5.875</span> ms
<span class="token number">8</span>  <span class="token number">101.95</span>.206.17 <span class="token punctuation">(</span><span class="token number">101.95</span>.206.17<span class="token punctuation">)</span>  <span class="token number">3.283</span> ms <span class="token number">124.74</span>.166.217 <span class="token punctuation">(</span><span class="token number">124.74</span>.166.217<span class="token punctuation">)</span>  <span class="token number">3.593</span> ms <span class="token number">124.74</span>.166.149 <span class="token punctuation">(</span><span class="token number">124.74</span>.166.149<span class="token punctuation">)</span>  <span class="token number">10.170</span> ms
<span class="token number">9</span>  <span class="token number">202.97</span>.12.210 <span class="token punctuation">(</span><span class="token number">202.97</span>.12.210<span class="token punctuation">)</span>  <span class="token number">6.108</span> ms <span class="token number">61.152</span>.24.18 <span class="token punctuation">(</span><span class="token number">61.152</span>.24.18<span class="token punctuation">)</span>  <span class="token number">5.225</span> ms <span class="token number">61.152</span>.86.142 <span class="token punctuation">(</span><span class="token number">61.152</span>.86.142<span class="token punctuation">)</span>  <span class="token number">3.788</span> ms
<span class="token number">10</span>  * * <span class="token number">202.97</span>.57.25 <span class="token punctuation">(</span><span class="token number">202.97</span>.57.25<span class="token punctuation">)</span>  <span class="token number">19.366</span> ms
<span class="token number">11</span>  <span class="token number">202.97</span>.12.201 <span class="token punctuation">(</span><span class="token number">202.97</span>.12.201<span class="token punctuation">)</span>  <span class="token number">3.835</span> ms <span class="token number">202.97</span>.12.190 <span class="token punctuation">(</span><span class="token number">202.97</span>.12.190<span class="token punctuation">)</span>  <span class="token number">4.261</span> ms <span class="token number">202.97</span>.33.154 <span class="token punctuation">(</span><span class="token number">202.97</span>.33.154<span class="token punctuation">)</span>  <span class="token number">4.667</span> ms
<span class="token number">12</span>  <span class="token number">202.97</span>.50.10 <span class="token punctuation">(</span><span class="token number">202.97</span>.50.10<span class="token punctuation">)</span>  <span class="token number">179.395</span> ms <span class="token number">202.97</span>.43.234 <span class="token punctuation">(</span><span class="token number">202.97</span>.43.234<span class="token punctuation">)</span>  <span class="token number">173.581</span> ms <span class="token number">202.97</span>.58.178 <span class="token punctuation">(</span><span class="token number">202.97</span>.58.178<span class="token punctuation">)</span>  <span class="token number">171.721</span> ms
<span class="token number">13</span>  <span class="token number">202.97</span>.92.37 <span class="token punctuation">(</span><span class="token number">202.97</span>.92.37<span class="token punctuation">)</span>  <span class="token number">169.941</span> ms  <span class="token number">164.142</span> ms <span class="token number">202.97</span>.90.118 <span class="token punctuation">(</span><span class="token number">202.97</span>.90.118<span class="token punctuation">)</span>  <span class="token number">153.497</span> ms
<span class="token number">14</span>  <span class="token number">218.30</span>.54.214 <span class="token punctuation">(</span><span class="token number">218.30</span>.54.214<span class="token punctuation">)</span>  <span class="token number">174.118</span> ms  <span class="token number">185.178</span> ms  <span class="token number">173.972</span> ms
<span class="token number">15</span>  * * one.one.one.one <span class="token punctuation">(</span><span class="token number">1.1</span>.1.1<span class="token punctuation">)</span>  <span class="token number">161.288</span> ms
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></li> <li><p>æ³¨æ„</p> <p>æ¯ä¸ª IP æ•°æ®æŠ¥æ‰€æœ‰çš„è·¯ç”±è·¯å¾„éƒ½æœ‰å¯èƒ½ä¸åŒ, æ‰€ä»¥ traceroute æ‰€æ¢æµ‹çš„åªæ˜¯å¤§æ¦‚è·¯å¾„.</p></li></ul> <h2 id="_09-ip-é€‰è·¯"><a href="#_09-ip-é€‰è·¯" class="header-anchor">#</a> 09 - IP é€‰è·¯</h2> <h2 id="_10-åŠ¨æ€é€‰è·¯åè®®"><a href="#_10-åŠ¨æ€é€‰è·¯åè®®" class="header-anchor">#</a> 10 - åŠ¨æ€é€‰è·¯åè®®</h2> <h2 id="_11-udp-ç”¨æˆ·æ•°æ®æŠ¥åè®®"><a href="#_11-udp-ç”¨æˆ·æ•°æ®æŠ¥åè®®" class="header-anchor">#</a> 11 - UDP ç”¨æˆ·æ•°æ®æŠ¥åè®®</h2> <h2 id="_12-å¹¿æ’­å’Œå¤šæ’­"><a href="#_12-å¹¿æ’­å’Œå¤šæ’­" class="header-anchor">#</a> 12 - å¹¿æ’­å’Œå¤šæ’­</h2> <blockquote><p>å¹¿æ’­å’Œå¤šæ’­ä»…é€‚ç”¨äº UDP</p></blockquote></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/louistin/blog.liteman/edit/master/docs/note/TCP-IP è¯¦è§£.md" target="_blank" rel="noopener noreferrer">åœ¨ GitHub ä¸Šç¼–è¾‘æ­¤é¡µ</a> <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></div> <div class="last-updated"><span class="prefix">æœ€è¿‘æ›´æ–°:</span> <span class="time">2020-05-18 17:34:48 UTC+08:00</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/note/UNIX-LINUX ç¼–ç¨‹å®è·µæ•™ç¨‹.html" class="prev">
        UNIX-LINUX ç¼–ç¨‹å®è·µæ•™ç¨‹
      </a></span> <span class="next"><a href="/note/MySQL å¿…çŸ¥å¿…ä¼š.html">
        MySQL å¿…çŸ¥å¿…ä¼š
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"><div class="reading-progress top" data-v-21b39eda><div class="progress" data-v-21b39eda></div></div><!----></div></div>
    <script src="/assets/js/app.5aa78949.js" defer></script><script src="/assets/js/2.db8a1bd9.js" defer></script><script src="/assets/js/34.1527656e.js" defer></script>
  </body>
</html>
